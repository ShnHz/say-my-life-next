---
title: ä¸¤è¡ŒCSSè®©é¡µé¢æå‡äº†è¿‘7å€æ¸²æŸ“æ€§èƒ½ï¼
date: 2022/12/14 20:23:25
summary: 
config: {
    show: true,
    top: false,
    dir: true,
    dirTag: ["h3","h4","h5"],
    tag: ["css","info"],
    valine: true,
    valineId: 
}
password: false
---

###### åŸæ–‡ [æ˜é‡‘](https://juejin.cn/post/7168629736838463525)

### å‰è¨€

å¯¹äºå‰ç«¯äººå‘˜æ¥è®²ï¼Œæœ€ä»¤äººå¤´ç–¼çš„åº”è¯¥å°±æ˜¯é¡µé¢æ€§èƒ½äº†ï¼Œå½“ç”¨æˆ·åœ¨è®¿é—®ä¸€ä¸ªé¡µé¢æ—¶ï¼Œæ€»æ˜¯å¸Œæœ›å®ƒèƒ½å¤Ÿå¿«é€Ÿå‘ˆç°åœ¨çœ¼å‰å¹¶ä¸”æ˜¯å¯äº¤äº’çŠ¶æ€ã€‚å¦‚æœé¡µé¢åŠ è½½è¿‡æ…¢ï¼Œä½ çš„ç”¨æˆ·å¾ˆå¯èƒ½ä¼šå› æ­¤ç¦»ä½ è€Œå»ã€‚æ‰€ä»¥é¡µé¢æ€§èƒ½å¯¹äºå‰ç«¯å¼€å‘è€…æ¥è¯´å¯è°“æ˜¯é‡ä¸­ä¹‹é‡ï¼Œå…¶å®ä½ å¦‚æœäº†è§£é¡µé¢ä»åŠ è½½åˆ°æ¸²æŸ“å®Œæˆçš„æ•´ä¸ªè¿‡ç¨‹ï¼Œå°±çŸ¥é“åº”è¯¥ä»å“ªæ–¹é¢ä¸‹æ‰‹äº†ã€‚

å—¯ï¼Œä¸è¦è·‘åäº†ï¼Œä»Šå¤©æˆ‘ä»¬ä¸»è¦æ¥ç ”ç©¶é•¿åˆ—è¡¨é¡µé¢çš„æ¸²æŸ“æ€§èƒ½

ç°å¦‚ä»Šçš„é¡µé¢è¶Šæ¥è¶Šå¤æ‚ï¼Œä¸€ä¸ªé¡µé¢å¾€å¾€æ‰¿è½½ç€å¤§é‡çš„å…ƒç´ ï¼Œæœ€å¸¸è§çš„å°±æ˜¯ä¸€äº›ç”µå•†é¡µé¢ï¼Œæ•°ä»¥ä¸‡è®¡çš„å•†å“åˆ—è¡¨æ˜¯æ€ä¹ˆä¿è¯æ¸²æŸ“ä¸å¡é¡¿çš„ï¼Œå¤§å®¶åœ¨é¢å¯¹è¿™ç§é•¿åˆ—è¡¨æ¸²æŸ“çš„åœºæ™¯ä¸‹ï¼Œä¸€èˆ¬éƒ½ä¼šé‡‡ç”¨åˆ†é¡µæˆ–è€…è™šæ‹Ÿåˆ—è¡¨æ¥å‡ç¼“é¡µé¢ä¸€æ¬¡æ€§æ¸²æŸ“çš„å‹åŠ›ï¼Œä½†è¿™äº›æ–¹å¼éƒ½éœ€è¦é…åˆJSæ¥æ—¶å®ç°ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä»…ä½¿ç”¨CSSå°±èƒ½å¤Ÿå®ç°çš„æ–¹æ¡ˆå‘¢ï¼Ÿ

ç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œå®ƒå°±æ˜¯æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’ â€”â€” å†…å®¹å¯è§æ€§ï¼ˆcontent-visibilityï¼‰


### content-visibility

::: tip content-visibility
æ˜¯CSSæ–°å¢çš„å±æ€§ï¼Œä¸»è¦ç”¨æ¥æé«˜é¡µé¢æ¸²æŸ“æ€§èƒ½ï¼Œå®ƒå¯ä»¥æ§åˆ¶ä¸€ä¸ªå…ƒç´ æ˜¯å¦æ¸²æŸ“å…¶å†…å®¹ï¼Œå¹¶ä¸”å…è®¸æµè§ˆå™¨è·³è¿‡è¿™äº›å…ƒç´ çš„å¸ƒå±€ä¸æ¸²æŸ“ã€‚

+ ->visible<-ï¼šé»˜è®¤å€¼ï¼Œæ²¡æœ‰æ•ˆæœã€‚å…ƒç´ çš„å†…å®¹è¢«æ­£å¸¸å¸ƒå±€å’Œå‘ˆç°ã€‚
+ ->hidden<-ï¼šå…ƒç´ è·³è¿‡å®ƒçš„å†…å®¹ã€‚è·³è¿‡çš„å†…å®¹ä¸èƒ½è¢«ç”¨æˆ·ä»£ç†åŠŸèƒ½è®¿é—®ï¼Œä¾‹å¦‚åœ¨é¡µé¢ä¸­æŸ¥æ‰¾ã€æ ‡ç­¾é¡ºåºå¯¼èˆªç­‰ï¼Œä¹Ÿä¸èƒ½è¢«é€‰æ‹©æˆ–èšç„¦ã€‚è¿™ç±»ä¼¼äºç»™å†…å®¹è®¾ç½®->display: none<-ã€‚
+ ->auto<-ï¼šè¯¥å…ƒç´ æ‰“å¼€å¸ƒå±€åŒ…å«ã€æ ·å¼åŒ…å«å’Œç»˜åˆ¶åŒ…å«ã€‚å¦‚æœè¯¥å…ƒç´ ä¸ç”¨æˆ·ä¸ç›¸å…³ï¼Œå®ƒä¹Ÿä¼šè·³è¿‡å…¶å†…å®¹ã€‚ä¸ ->hidden<- ä¸åŒï¼Œè·³è¿‡çš„å†…å®¹å¿…é¡»ä»å¯æ­£å¸¸ç”¨äºç”¨æˆ·ä»£ç†åŠŸèƒ½ï¼Œä¾‹å¦‚åœ¨é¡µé¢ä¸­æŸ¥æ‰¾ã€tab é¡ºåºå¯¼èˆªç­‰ï¼Œå¹¶ä¸”å¿…é¡»æ­£å¸¸å¯èšç„¦å’Œå¯é€‰æ‹©ã€‚
:::

#### content-visibility: hidden æ‰‹åŠ¨ç®¡ç†å¯è§æ€§

ä¸Šé¢è¯´åˆ°->content-visibility: hidden<-çš„æ•ˆæœä¸->display: none<-ç±»ä¼¼ï¼Œä½†å…¶å®ä¸¤è€…è¿˜æ˜¯æœ‰æ¯”è¾ƒå¤§çš„åŒºåˆ«çš„ï¼š

+ ->content-visibility: hidden<- åªæ˜¯éšè—äº†å­å…ƒç´ ï¼Œè‡ªèº«ä¸ä¼šè¢«éšè—
+ ->content-visibility: hidden<- éšè—å†…å®¹çš„æ¸²æŸ“çŠ¶æ€ä¼šè¢«ç¼“å­˜ï¼Œæ‰€ä»¥å½“å®ƒè¢«ç§»é™¤æˆ–è€…è®¾ä¸ºå¯è§æ—¶ï¼Œæµè§ˆå™¨ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œè€Œæ˜¯ä¼šåº”ç”¨ç¼“å­˜ï¼Œæ‰€ä»¥å¯¹äºéœ€è¦é¢‘ç¹åˆ‡æ¢æ˜¾ç¤ºéšè—çš„å…ƒç´ ï¼Œè¿™ä¸ªå±æ€§èƒ½å¤Ÿæå¤§åœ°æé«˜æ¸²æŸ“æ€§èƒ½ã€‚

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/1.jpg" />

ä»è¿™ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ·»åŠ äº†->content-visibility: hidden<-å…ƒç´ çš„å­å…ƒç´ ç¡®å®æ˜¯æ²¡æœ‰æ¸²æŸ“ï¼Œä½†å®ƒè‡ªèº«æ˜¯ä¼šæ¸²æŸ“çš„ï¼

#### content-visibility: auto è·³è¿‡æ¸²æŸ“å·¥ä½œ

æˆ‘ä»¬ä»”ç»†æƒ³æƒ³ï¼Œé¡µé¢ä¸Šè™½ç„¶ä¼šæœ‰å¾ˆå¤šå…ƒç´ ï¼Œä½†æ˜¯å®ƒä»¬ä¼šåŒæ—¶å‘ˆç°åœ¨ç”¨æˆ·çœ¼å‰å—ï¼Œå¾ˆæ˜¾ç„¶æ˜¯ä¸ä¼šçš„ï¼Œç”¨æˆ·æ¯æ¬¡èƒ½å¤ŸçœŸå®çœ‹åˆ°å°±åªæœ‰è®¾å¤‡å¯è§åŒºé‚£äº›å†…å®¹ï¼Œå¯¹äºéå¯è§åŒºçš„å†…å®¹åªè¦é¡µé¢ä¸å‘ç”Ÿæ»šåŠ¨ï¼Œç”¨æˆ·å°±æ°¸è¿œçœ‹ä¸åˆ°ã€‚è™½ç„¶ç”¨æˆ·çœ‹ä¸åˆ°ï¼Œä½†æµè§ˆå™¨å´ä¼šå®å®åœ¨åœ¨çš„å»æ¸²æŸ“ï¼Œä»¥è‡³äºæµªè´¹å¤§é‡çš„æ€§èƒ½ã€‚æ‰€ä»¥æˆ‘ä»¬å¾—æƒ³åŠæ³•è®©æµè§ˆå™¨ä¸æ¸²æŸ“éå¯è§†åŒºçš„å†…å®¹å°±èƒ½å¤Ÿè¾¾åˆ°æé«˜é¡µé¢æ¸²æŸ“æ€§èƒ½çš„æ•ˆæœã€‚

æˆ‘ä»¬ä¸Šé¢è¯´åˆ°çš„è™šæ‹Ÿåˆ—è¡¨åŸç†å…¶å®å°±è·Ÿè¿™ä¸ªç±»ä¼¼ï¼Œåœ¨é¦–å±åŠ è½½æ—¶ï¼ŒåªåŠ è½½**å¯è§†åŒº**çš„å†…å®¹ï¼Œå½“é¡µé¢å‘ç”Ÿæ»šåŠ¨æ—¶ï¼ŒåŠ¨æ€é€šè¿‡è®¡ç®—è·å¾—**å¯è§†åŒº**çš„å†…å®¹ï¼Œå¹¶å°†**éå¯è§†åŒº**çš„å†…å®¹è¿›è¡Œåˆ é™¤ï¼Œè¿™æ ·å°±èƒ½å¤Ÿå¤§å¤§æé«˜é•¿åˆ—è¡¨çš„æ¸²æŸ“æ€§èƒ½ã€‚

ä½†è¿™ä¸ªéœ€è¦é…åˆJSæ‰èƒ½å®ç°ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨CSSä¸­->content-visibility: auto<-ï¼Œå®ƒå¯ä»¥ç”¨æ¥è·³è¿‡å±å¹•å¤–çš„å†…å®¹æ¸²æŸ“ï¼Œå¯¹äºè¿™ç§æœ‰å¤§é‡ç¦»å±å†…å®¹çš„é•¿åˆ—è¡¨ï¼Œå¯ä»¥å¤§å¤§å‡å°‘é¡µé¢æ¸²æŸ“æ—¶é—´ã€‚

æˆ‘ä»¬å°†ä¸Šé¢çš„ä¾‹å­ç¨å¾®æ”¹æ”¹ï¼š

```vue
<template>
  <div class="card_item">
    <div class="card_inner">
      <img :src="book.bookCover" class="book_cover" />
      <div class="card_item_right">
        <div class="book_title">{{ `${book.bookName}${index + 1}` }}</div>
        <div class="book_author">{{ book.catlog }}</div>
        <div class="book_tags">
          <div class="book_tag" v-for="(item, index) in book.tags" :key="index">
            {{ item }}
          </div>
        </div>
        <div class="book_desc">
          {{ book.desc }}
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { toRefs } from "vue";

const props = defineProps<{
  book: any;
  index: any;
}>();
const { book, index } = toRefs(props);
</script>

<style lang="less" scoped>
.card_item {
  margin: 20px auto;
  content-visibility: auto;
}
  / *
  ...
  */
</style>
```

é¦–å…ˆæ˜¯æ²¡æœ‰æ·»åŠ ->content-visibility: auto<-çš„æ•ˆæœï¼Œæ— è®ºè¿™äº›å…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºï¼Œéƒ½ä¼šè¢«æ¸²æŸ“

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/2.jpg" />

å¦‚æœæˆ‘ä»¬åœ¨å¹³å¸¸ä¸šåŠ¡ä¸­è¿™æ ·å†™ï¼Œç”¨æˆ·è¿›å…¥åˆ°è¿™ä¸ªé¡µé¢å¯èƒ½å°±ç›´æ¥å£åèŠ¬èŠ³äº†ï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸€ä¸ªåˆ—è¡¨é¡¹åŠ ä¸Šï¼š

```css
.card_item {
  content-visibility: auto;
}
```

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å†æ¥çœ‹ä¸‹æ•ˆæœï¼š

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/3.jpg" />

ä»ç¬¬**10**ä¸ªå¼€å§‹ï¼Œè¿™äº›æ²¡åœ¨å¯è§†åŒºçš„å…ƒç´ å°±æ²¡æœ‰è¢«æ¸²æŸ“ï¼Œè¿™å¯æ¯”ä¸Šé¢é‚£ç§å…¨éƒ¨å…ƒç´ éƒ½æ¸²æŸ“å¥½å¤ªå¤šäº†ï¼Œä½†æ˜¯å¦‚æœæµè§ˆå™¨ä¸æ¸²æŸ“é¡µé¢å†…çš„ä¸€äº›å…ƒç´ ï¼Œæ»šåŠ¨å°†æ˜¯ä¸€åœºå™©æ¢¦ï¼Œå› ä¸ºæ— æ³•æ­£ç¡®è®¡ç®—é¡µé¢é«˜åº¦ã€‚è¿™æ˜¯å› ä¸ºï¼Œ->content-visibility<-ä¼šå°†åˆ†é…ç»™å®ƒçš„å…ƒç´ çš„é«˜åº¦->ï¼ˆheightï¼‰<-è§†ä¸º->0<-ï¼Œæµè§ˆå™¨åœ¨æ¸²æŸ“ä¹‹å‰ä¼šå°†è¿™ä¸ªå…ƒç´ çš„é«˜åº¦å˜ä¸º->0<-ï¼Œä»è€Œä½¿æˆ‘ä»¬çš„é¡µé¢é«˜åº¦å’Œæ»šåŠ¨å˜å¾—æ··ä¹±ã€‚

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/4.gif" />

è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é¡µé¢ä¸Šçš„æ»šåŠ¨æ¡ä¼šå‡ºç°æŠ–åŠ¨ç°è±¡ï¼Œè¿™æ˜¯å› ä¸ºå¯è§†åŒºå¤–çš„å…ƒç´ åªæœ‰å‡ºç°åœ¨äº†å¯è§†åŒºæ‰ä¼šè¢«æ¸²æŸ“ï¼Œè¿™å°±å›å¯¼è‡´å‰åé¡µé¢é«˜åº¦ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä»è€Œå‡ºç°æ»šåŠ¨æ¡çš„è¯¡å¼‚æŠ–åŠ¨ç°è±¡ï¼Œè¿™æ˜¯è™šæ‹Ÿåˆ—è¡¨åŸºæœ¬éƒ½ä¼šå­˜åœ¨çš„é—®é¢˜ã€‚

> æ³¨æ„ï¼šå½“å…ƒç´ æ¥è¿‘è§†å£æ—¶ï¼Œæµè§ˆå™¨ä¸å†æ·»åŠ ->size<-å®¹å™¨å¹¶å¼€å§‹ç»˜åˆ¶å’Œå‘½ä¸­æµ‹è¯•å…ƒç´ çš„å†…å®¹ã€‚è¿™ä½¿å¾—æ¸²æŸ“å·¥ä½œèƒ½å¤ŸåŠæ—¶å®Œæˆä»¥ä¾›ç”¨æˆ·æŸ¥çœ‹ã€‚

è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸Šé¢æˆ‘ä»¬çœ‹åˆ°çš„æ˜¯ä»ç¬¬åä¸ªæ‰å¼€å§‹ä¸æ¸²æŸ“å­å…ƒç´ ï¼Œå› ä¸ºå®ƒéœ€è¦ä¸€ä¸ªç¼“å†²åŒºä»¥ä¾¿æµè§ˆå™¨èƒ½å¤Ÿåœ¨é¡µé¢å‘ç”Ÿæ»šåŠ¨æ—¶åŠæ—¶æ¸²æŸ“å‘ˆç°åœ¨ç”¨æˆ·çœ¼å‰ã€‚

ä¸Šé¢æåˆ°çš„->size<-å…¶å®æ˜¯ä¸€ç§ <code>CSS</code> å±æ€§çš„æ½œåœ¨å€¼->contain<-ï¼Œå®ƒæŒ‡çš„æ˜¯å…ƒç´ ä¸Šçš„å¤§å°é™åˆ¶ç¡®ä¿å…ƒç´ çš„æ¡†å¯ä»¥åœ¨ä¸éœ€è¦æ£€æŸ¥å…¶åä»£çš„æƒ…å†µä¸‹è¿›è¡Œå¸ƒå±€ã€‚è¿™æ„å‘³ç€å¦‚æœæˆ‘ä»¬åªéœ€è¦å…ƒç´ çš„å¤§å°ï¼Œæˆ‘ä»¬å¯ä»¥è·³è¿‡åä»£çš„å¸ƒå±€ã€‚

#### contain-intrinsic-size æ•‘åœº

é¡µé¢åœ¨æ»šåŠ¨è¿‡ç¨‹ä¸­æ»šåŠ¨æ¡ä¸€ç›´æŠ–åŠ¨ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸èƒ½æ¥å—çš„ä½“éªŒé—®é¢˜ï¼Œä¸ºäº†æ›´å¥½åœ°å®ç°->content-visibility<-ï¼Œæµè§ˆå™¨éœ€è¦åº”ç”¨ ->size containment<- ä»¥ç¡®ä¿å†…å®¹çš„æ¸²æŸ“ç»“æœä¸ä¼šä»¥ä»»ä½•æ–¹å¼å½±å“å…ƒç´ çš„å¤§å°ã€‚è¿™æ„å‘³ç€è¯¥å…ƒç´ å°†åƒç©ºçš„ä¸€æ ·å¸ƒå±€ã€‚å¦‚æœå…ƒç´ æ²¡æœ‰åœ¨å¸¸è§„å—å¸ƒå±€ä¸­æŒ‡å®šçš„é«˜åº¦ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¯ ->0<- é«˜åº¦ã€‚

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨->contain-intrinsic-size<-æ¥æŒ‡å®šçš„å…ƒç´ è‡ªç„¶å¤§å°ï¼Œç¡®ä¿æˆ‘ä»¬æœªæ¸²æŸ“å­å…ƒç´ çš„ ->div<- ä»ç„¶å æ®ç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿä¿ç•™å»¶è¿Ÿæ¸²æŸ“çš„å¥½å¤„ã€‚

##### è¯­æ³•

æ­¤å±æ€§æ˜¯ä»¥ä¸‹ CSS å±æ€§çš„ç®€å†™ï¼š

+ ->contain-intrinsic-width<-
+ ->contain-intrinsic-height<-

```css
/* Keyword values */
contain-intrinsic-width: none;

/* <length> values */
contain-intrinsic-size: 1000px;
contain-intrinsic-size: 10rem;

/* width | height */
contain-intrinsic-size: 1000px 1.5em;

/* auto <length> */
contain-intrinsic-size: auto 300px;

/* auto width | auto height */
contain-intrinsic-size: auto 300px auto 4rem;
```

>->contain-intrinsic-size<- å¯ä»¥ä¸ºå…ƒç´ æŒ‡å®šä»¥ä¸‹ä¸€ä¸ªæˆ–ä¸¤ä¸ªå€¼ã€‚å¦‚æœæŒ‡å®šäº†ä¸¤ä¸ªå€¼ï¼Œåˆ™ç¬¬ä¸€ä¸ªå€¼é€‚ç”¨äºå®½åº¦ï¼Œç¬¬äºŒä¸ªå€¼é€‚ç”¨äºé«˜åº¦ã€‚å¦‚æœæŒ‡å®šå•ä¸ªå€¼ï¼Œåˆ™å®ƒé€‚ç”¨äºå®½åº¦å’Œé«˜åº¦ã€‚

##### å®ç°

æˆ‘ä»¬åªéœ€è¦ç»™æ·»åŠ äº†->content-visibility: auto<-çš„å…ƒç´ æ·»åŠ ä¸Š->contain-intrinsic-size<-å°±èƒ½å¤Ÿè§£å†³æ»šåŠ¨æ¡æŠ–åŠ¨çš„é—®é¢˜ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªé«˜åº¦çº¦æ¥è¿‘çœŸå®æ¸²æŸ“çš„é«˜åº¦ï¼Œæ•ˆæœä¼šè¶Šå¥½ï¼Œå¦‚æœå®åœ¨æ— æ³•çŸ¥é“å‡†ç¡®çš„é«˜åº¦ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™ä¸€ä¸ªå¤§æ¦‚çš„å€¼ï¼Œä¹Ÿä¼šä½¿æ»šåŠ¨æ¡çš„é—®é¢˜ç›¸å¯¹å‡å°‘ã€‚

```css
.card_item {
  content-visibility: auto;
  contain-intrinsic-size: 200px;
}
```

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/5.jpg" />

ä¹‹å‰æ²¡æ·»åŠ ->contain-intrinsic-size<-å±æ€§æ—¶ï¼Œå¯è§†åŒºå¤–çš„å…ƒç´ é«˜åº¦éƒ½æ˜¯0ï¼Œç°åœ¨è¿™äº›å…ƒç´ é«˜åº¦éƒ½æ˜¯æˆ‘ä»¬è®¾ç½®çš„->contain-intrinsic-size<-çš„å€¼ï¼Œè¿™æ ·çš„è¯æ•´ä¸ªé¡µé¢çš„é«˜åº¦å°±æ˜¯ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼ˆæˆ–è€…è¯´å˜åŒ–å¾ˆå°ï¼‰ï¼Œä»è€Œé¡µé¢æ»šåŠ¨æ¡ä¹Ÿä¸ä¼šå‡ºç°æŠ–åŠ¨é—®é¢˜ï¼ˆæˆ–è€…è¯´æŠ–åŠ¨å‡å°‘ï¼‰

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/6.gif" />


### æ€§èƒ½å¯¹æ¯”

ä¸Šé¢è¯´äº†è¿™ä¹ˆå¤šï¼Œ->content-visibility<-æ˜¯å¦çœŸçš„èƒ½å¤Ÿæé«˜é¡µé¢çš„æ¸²æŸ“æ€§èƒ½å‘¢ï¼Œæˆ‘ä»¬æ¥å®é™…å¯¹æ¯”çœ‹çœ‹ï¼š

é¦–å…ˆæ˜¯æ²¡æœ‰->content-visibility<-çš„é¡µé¢æ¸²æŸ“

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/7.jpg" />

ç„¶åæ˜¯æœ‰->content-visibility<-çš„é¡µé¢æ¸²æŸ“

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/8.jpg" />

ä¸Šé¢æ˜¯ç”¨1000ä¸ªåˆ—è¡¨å…ƒç´ è¿›è¡Œæµ‹è¯•çš„ï¼Œæœ‰->content-visibility<-çš„é¡µé¢æ¸²æŸ“èŠ±è´¹æ—¶é—´å¤§æ¦‚æ˜¯**37ms**ï¼Œè€Œæ²¡æœ‰->content-visibility<-çš„é¡µé¢æ¸²æŸ“èŠ±è´¹æ—¶é—´å¤§æ¦‚æ˜¯**269ms**ï¼Œæå‡äº†è¶³è¶³æœ‰7å€ä¹‹å¤šï¼ï¼ï¼

**å¯¹äºåˆ—è¡¨å…ƒç´ æ›´å¤šçš„é¡µé¢ï¼Œ->content-visibility<-å¸¦æ¥çš„æ¸²æŸ“æ€§èƒ½æå‡ä¼šæ›´åŠ æ˜æ˜¾ã€‚**

### æ€è€ƒğŸ¤”

#### èƒ½å¦å‡å°é¡µé¢çš„å†…å­˜å ç”¨ï¼Ÿ

ä¹‹å‰æœ‰åŒå­¦é—®åˆ°äº†->content-visibility: auto<-æ˜¯å¦ä¼šå‡å°‘é¡µé¢å†…å­˜çš„å ç”¨ï¼Œè¿™ä¸ªæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸‹ä½¿ç”¨å‰åé¡µé¢æ‰€å ç”¨å†…å­˜çš„å¤§å°æ˜¯å¦æœ‰å˜åŒ–ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡chromeæµè§ˆå™¨ **è®¾ç½® --> æ›´å¤šå·¥å…· --> ä»»åŠ¡ç®¡ç†å™¨** æŸ¥çœ‹é¡µé¢å ç”¨å†…å­˜å¤§å°ã€‚

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/9.jpg" />

é¦–å…ˆæ˜¯æ²¡æœ‰->content-visibility: auto<-ï¼Œé¡µé¢å ç”¨å†…å­˜å¤§æ¦‚ä¸º96.2MB

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/10.jpg" />

ç„¶åæ˜¯æ·»åŠ äº†->content-visibility: auto<-ï¼Œé¡µé¢å ç”¨å†…å­˜ä»ç„¶æ˜¯96.2MB

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/11.jpg" />

ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¹¶ä¸ä¼šå‡å°‘é¡µé¢å ç”¨å†…å­˜å¤§å°ï¼Œè¿™äº›å…ƒç´ æ˜¯çœŸå®å­˜åœ¨äºDOMæ ‘ä¸­çš„ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡JSè®¿é—®åˆ°

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/12.jpg" />

#### æ˜¯å¦ä¼šå½±å“è„šæœ¬çš„åŠ è½½è¡Œä¸ºï¼Ÿ

å¦‚æœæˆ‘ä»¬åœ¨æ·»åŠ äº†->content-visibility: auto<-çš„å…ƒç´ å†…å»åŠ è½½è„šæœ¬ï¼Œå¹¶ä¸”æ­¤æ—¶çš„å…ƒç´ å¤„äºä¸€ä¸ªä¸å¯è§çš„çŠ¶æ€ï¼Œé‚£ä¹ˆæ­¤æ—¶å…ƒç´ å†…çš„è„šæœ¬èƒ½å¤Ÿæ­£å¸¸åŠ è½½å‘¢ï¼Ÿ

```html
<!-- ... ç¬¬åäºŒä¸ª -->
<div class="visibility_item">
        <div class="inner">
            æµ‹è¯•è„šæœ¬
            <img src="../../../../images/22-11/content-s1.png" alt="">
            <script src="./2.js"></script>
        </div>
        
</div>
```

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/13.jpg" />

å¾ˆæ˜æ˜¾å®ƒå¹¶ä¸ä¼šå½±å“è„šæœ¬ä¸å›¾ç‰‡çš„åŠ è½½è¡Œä¸ºï¼Œå¹¶ä¸”è„šæœ¬å†åŠ è½½åèƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œã€‚ç»“åˆä¸Šé¢ç¬¬ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œä½¿ç”¨äº†->content-visibility: auto<-çš„å…ƒç´ å½±å“çš„åªæ˜¯å­å…ƒç´ çš„æ¸²æŸ“ï¼Œå¯¹äºå†…éƒ¨é™æ€èµ„æºçš„åŠ è½½è¿˜æ˜¯æ­£å¸¸è¿›è¡Œã€‚

ä½†æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯è„šæœ¬çš„æ‰§è¡Œæ—¶æœºï¼Œå¦‚æœè¦è·å–DOMå…ƒç´ çš„è¯ï¼Œæ­¤æ—¶çš„è„šæœ¬åªèƒ½è·å–åˆ°å®ƒåŠ è½½ä½ç½®ä¹‹å‰çš„DOMå…ƒç´ ï¼Œè€Œä¸å®ƒè‡ªèº«DOMæœ‰æ²¡æœ‰æ¸²æŸ“æ— å…³ï¼

```js
console.log('æµ‹è¯•è„šæœ¬')
console.log('ç¬¬åä¸€ä¸ª', document.querySelectorAll('.visibility_item')[10])

console.log('ç¬¬åä¸‰ä¸ª', document.querySelectorAll('.visibility_item')[12])
```

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/14.jpg" />

#### å¯è®¿é—®æ€§

ä½¿ç”¨äº†->content-visibility: auto<- å¹¶ä¸”åœ¨éå¯è§†åŒºçš„å…ƒç´ æ˜¯å¦å­˜åœ¨äºå¯è®¿é—®æ ‘ä¸­ï¼Ÿ

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/15.jpg" />

è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡º->content-visibility: auto<-æ˜¯å±å¹•å¤–çš„å†…å®¹åœ¨æ–‡æ¡£å¯¹è±¡æ¨¡å‹ä¸­ä»ç„¶å¯ç”¨ï¼Œå› æ­¤åœ¨å¯è®¿é—®æ€§æ ‘ä¸­ï¼ˆä¸->visibility: hidden<-ä¸åŒï¼‰ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢ä¸Šæœç´¢å¹¶å¯¼èˆªåˆ°è¯¥å†…å®¹ï¼Œè€Œæ— éœ€ç­‰å¾…å®ƒåŠ è½½æˆ–ç‰ºç‰²æ¸²æŸ“æ€§èƒ½ã€‚

**è¿™ä¸ªåŠŸèƒ½ç‰¹æ€§æ˜¯åœ¨chrome 90 ä¸­æ›´æ–°çš„ï¼Œåœ¨ chrome 85-89 ä¸­ï¼Œå±å¹•å¤–çš„å­å…ƒç´ ->content-visibility: auto<-è¢«æ ‡è®°ä¸ºä¸å¯è§ã€‚**

### å…¼å®¹æ€§

->content-visibility<-æ˜¯chrome85æ–°å¢çš„ç‰¹æ€§ï¼Œæ‰€ä»¥å…¼å®¹æ€§è¿˜ä¸æ˜¯å¾ˆé«˜ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„CSSå±æ€§ï¼Œç”±äºè·³è¿‡äº†æ¸²æŸ“ï¼Œå¦‚æœæˆ‘ä»¬å¤§éƒ¨åˆ†å†…å®¹éƒ½åœ¨å±å¹•å¤–ï¼Œåˆ©ç”¨è¯¥->content-visibility<-å±æ€§å¯ä»¥ä½¿åˆå§‹ç”¨æˆ·åŠ è½½é€Ÿåº¦æ›´å¿«ã€‚ç›¸ä¿¡å…¼å®¹æ€§çš„é—®é¢˜åœ¨ä¸ä¹…çš„å°†æ¥ä¼šå¾—åˆ°è§£å†³~

<img src="https://cdn.chenyingshuang.cn/blog/css/LiangXingCSSRangYeMianTiShengLiaoJin7BeiXuanRanXingNen/16.jpg" />