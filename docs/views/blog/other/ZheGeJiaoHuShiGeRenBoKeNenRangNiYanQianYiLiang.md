---
title: è¿™ä¸ªäº¤äº’å¼ä¸ªäººåšå®¢èƒ½è®©ä½ çœ¼å‰ä¸€äº®âœ¨ğŸ‘€ ï¼Ÿ
date: 2023/09/08 16:50:48
summary: è¿˜æŒºæœ‰è¶£çš„ä¸€ä¸ªåšå®¢å½¢å¼
config: {
    show: true,
    top: false,
    dir: true,
    dirTag: ["h3","h4","h5"],
    tag: ["info"],
    valine: true,
    valineId: 
}
password: false
outline: [3,5]
---

###### åŸæ–‡ [æ˜é‡‘](https://juejin.cn/post/7267408057163055139)

<p align="center"><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7082bf114e23416e9a14f2ef21796bf0~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="2023-08-15 13.21.03.gif" loading="lazy"></p>
<p>ä»æ„æ€åˆ°ä¸Šçº¿çš„å…¨è¿‡ç¨‹ï¼Œå¼€å‘ä¸­é‡åˆ°ä¸€äº›æœªçŸ¥é—®é¢˜ï¼Œä¹Ÿéƒ½é€šè¿‡æŸ¥é˜…èµ„æ–™å’Œæºç ä¸€ä¸€è§£å†³ï¼Œå°è®°ä¸€ä¸‹æœ›å¯¹æ­£åœ¨ä½¿ç”¨æˆ–å³å°†ä½¿ç”¨<code>Nextjs</code>å¼€å‘çš„ä½ ä»¬æœ‰æ‰€å¸®åŠ©ã€‚</p>


### é‚£äº›å¹´æˆ‘å¼€å‘è¿‡çš„åšå®¢

            
<p>å°±æŒºæœ‰æ„æ€ï¼ŒåŸŸåï¼ŒæŠ€æœ¯æ ˆå’Œå¹³å°çš„æŠ˜è…¾å²</p>
<ul>
<li>2018å¹´ä½¿ç”¨<code>hexo</code>æ­å»ºäº†ä¸ªé™æ€åšå®¢ï¼Œéƒ¨ç½²åœ¨<code>github pages</code></li>
<li>2020å¹´é‡æ–°å†™äº†åšå®¢ï¼Œ<code>vue</code>ï¼Œ<code>nodejs</code>ï¼Œ<code>mongodb</code>ä¸‰ä»¶å¥—ï¼Œä½¿ç”¨<code>nginx</code>éƒ¨ç½²åœ¨äº‘æœåŠ¡å™¨ä¸Š</li>
<li>2023å¹´äº‘æœåŠ¡å™¨è¿‡æœŸäº†ï¼Œå†ä¸€æ¬¡é‡å†™äº†åšå®¢ï¼Œ<code>nextjs</code>ä¸ºåŸºç¡€æ¡†æ¶ï¼Œéƒ¨ç½²åœ¨<code>vercel</code>ä¸Š</li>
</ul>


### èƒŒæ™¯

            
<p>å› ä¸ºæ—¥å¸¸å¼€å‘ç¦»ä¸å¼€ç»ˆç«¯ï¼Œæ­£å¥½ä¹Ÿæœ‰é‡å†™åšå®¢çš„æƒ³æ³•ï¼Œæ‰“ç®—å¼€å‘ä¸€ä¸ªä¸åªæ˜¯çœ‹çš„åšå®¢ç½‘ç«™ï¼Œæ‰€ä»¥æ¨¡ä»¿ç»ˆç«¯é£æ ¼å¼€å‘äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fyucihent.space%2F" target="_blank" title="https://yucihent.space/" ref="nofollow noopener noreferrer">Yucihent</a>ã€‚</p>


### æŠ€æœ¯æ ˆ

            
<p><code>nextjs</code> <a href="https://link.juejin.cn?target=https%3A%2F%2Fyucihent.space%2Fabout" target="_blank" title="https://yucihent.space/about" ref="nofollow noopener noreferrer">æ›´å¤šæŠ€æœ¯æ ˆ</a></p>
<p>é€‰ç”¨<code>nextjs</code>æ˜¯å› ä¸º<code>next13</code>æ›´æ–°ä¸”ç¨³å®šäº†<code>App Router</code>å’Œä¸€äº›å…¶ä»–æ–°ç‰¹æ€§ã€‚</p>


### è®¾è®¡

            
<p>ç®€çº¦ä¸ºä¸»ï¼Œé¦–é¡µä¸ºç±»ç»ˆç«¯é£æ ¼ï¼Œ<code>prompt</code>æ ·å¼å‚è€ƒäº†<code>starship</code>ï¼Œä¹Ÿå‚è€ƒè¿‡<code>ohmyzsh themes</code>ï¼Œé€‰ç”¨<code>starship</code>å› ä¸ºè§‰å¾—æ›´å¥½çœ‹ã€‚</p>


### äº¤äº’

            
<p>é€šè¿‡æ‰‹åŠ¨è¾“å…¥æˆ–ç‚¹å‡»åˆ—å‡ºçš„å‘½ä»¤è¿›è¡Œäº¤äº’ï¼Œç›®å‰å¯äº¤äº’çš„å‘½ä»¤æœ‰ï¼š</p>
<ul>
<li><code>help</code> æŸ¥çœ‹æ›´å¤š</li>
<li><code>list</code>å’Œ<code>ls</code> åˆ—å‡ºå¯ç”¨å‘½ä»¤</li>
<li><code>clear</code> æ¸…ç©ºæ‰€æœ‰è¾“å‡º</li>
<li><code>posts</code> åˆ—å‡ºæ‰€æœ‰æ–‡ç« </li>
<li><code>about</code> å…³äºæˆ‘</li>
</ul>
<p>åç»­ä¼šæ–°å¢ä¸€äº›å‘½ä»¤ï¼Œå¢åŠ äº¤äº’çš„è¶£å‘³ã€‚</p>


### æš—é»‘æ¨¡å¼

            
<blockquote>
<p>åŸºäº<code>tailwind</code>çš„<code>dark mode</code>å’Œ<code>next-themes</code></p>
</blockquote>
<p>é¦–å…ˆå°†<code>tailwind</code>çš„<code>dark mode</code>è®¾ç½®ä¸º<code>class</code>ï¼Œç›®çš„æ˜¯å°†æš—é»‘æ¨¡å¼çš„åˆ‡æ¢è®¾ç½®ä¸ºæ‰‹åŠ¨ï¼Œè€Œä¸æ˜¯è·Ÿéšç³»ç»Ÿã€‚</p>


```js
// tailwind.config.js

module.exports = {
  darkMode: 'class'
}

```


<p>æ–°å»º<code>ThemeProvider</code>ç»„ä»¶ï¼Œç”¨åˆ°<code>next-themes</code>æä¾›çš„<code>ThemeProvider</code>ï¼Œéœ€è¦åœ¨æ–‡ä»¶é¡¶éƒ¨ä½¿ç”¨<code>use client</code>ï¼Œå› ä¸º<code>createContext</code>åªåœ¨å®¢æˆ·ç«¯ç»„ä»¶ä½¿ç”¨ã€‚</p>


```tsx
'use client'

import { ThemeProvider as NextThemeProvider } from 'next-themes'
import type { ThemeProviderProps } from 'next-themes/dist/types'

export default function ThemeProvider({
  children,
  ...props
}: ThemeProviderProps) {
  return &lt;NextThemeProvider {...props}&gt;{children}&lt;/NextThemeProvider&gt;
}

```


<p>åœ¨<code>app/layout.tsx</code>ä¸­ä½¿ç”¨<code>ThemeProvider</code>ï¼Œè®¾ç½®<code>attribute</code>ä¸º<code>class</code>ï¼Œè¿™æ˜¯å¿…è¦çš„ã€‚</p>


```tsx
&lt;ThemeProvider attribute="class"&gt;{children}&lt;/ThemeProvider&gt;

```


<p><code>next-themes</code>æä¾›äº†<code>useTheme</code>ï¼Œè§£æ„å‡º<code>theme</code>å’Œ<code>setTheme</code>ç”¨äºæ‰‹åŠ¨è®¾ç½®ä¸»é¢˜ã€‚</p>
<p>ç»¼ä¸ŠåŸºæœ¬å®ç°æš—é»‘æ¨¡å¼åˆ‡æ¢ï¼Œä½†ä½ ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°æ­¤æŠ¥é”™ä¿¡æ¯ï¼š<code>Warning: Extra attributes from the server: class,style</code>ï¼Œè™½ç„¶å®ƒå¹¶ä¸å½±å“åŠŸèƒ½ï¼Œä½†ç»ˆç©¶æ˜¯ä¸ªæŠ¥é”™ã€‚
ä½œä¸ºç¬¬ä¸‰æ–¹åŒ…ï¼Œå¯èƒ½å­˜åœ¨æ°´åˆä¸åŒ¹é…çš„é—®é¢˜ï¼Œç»æŸ¥é˜…èµ„æ–™ï¼Œç¦ç”¨<code>ThemeProvider</code>ç»„ä»¶é¢„æ¸²æŸ“æ¶ˆé™¤æŠ¥é”™ã€‚</p>
<p>èµ„æ–™ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fdiscussions%2F22388" target="_blank" title="https://github.com/vercel/next.js/discussions/22388" ref="nofollow noopener noreferrer">Warning: Extra attributes from the server: style</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fmessages%2Freact-hydration-error%23solution-2-disabling-ssr-on-specific-components" target="_blank" title="https://nextjs.org/docs/messages/react-hydration-error#solution-2-disabling-ssr-on-specific-components" ref="nofollow noopener noreferrer">Disabling SSR on specific components</a></li>
</ul>


```tsx
const NoSSRThemeProvider =
  dynamic(() =&gt; import('@/components/ThemeProvider'), {
    ssr: false
  })

&lt;NoSSRThemeProvider attribute="class"&gt;{children}&lt;/NoSSRThemeProvider&gt;

```




### ç±»ç»ˆç«¯

            
<blockquote>
<p>ç”±è¾“å…¥å’Œè¾“å‡ºç»„ä»¶ç»„æˆï¼Œè¾“å…¥çš„ç»“æœæ·»åŠ åˆ°è¾“å‡ºlistä¸­</p>
</blockquote>


#### å‘½ä»¤è¾“å…¥çš„æ‰“å­—æ•ˆæœ

            
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d14622a8447a46b9894ff128819ceaed~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="Alt Text" width="500" loading="lazy">
<p>å®šä¹‰æ‰“å­—é—´éš”100msï¼Œå¯¹é”®å…¥çš„å‘½ä»¤forå¤„ç†ï¼Œå®šæ—¶å™¨ä¸­æ ¹æ®éå†çš„ç´¢å¼•å»¶è¿Ÿèµ‹å€¼ã€‚</p>


```ts
const autoTyping = (cmd: string) =&gt; {
  const interval = 100 // ms
  for (let i = 0; i &lt; cmd.length; i++) {
    setTimeout(
      () =&gt; {
        setCmd((prev) =&gt; prev + cmd.charAt(i))
      },
      interval * (i + 1)
    )
  }
}

```




#### æ»šåŠ¨åˆ°åº•éƒ¨

            
<p>å®šä¹‰å¤–å±‚å®¹å™¨<code>ref</code>ä¸º<code>containerRef</code>ï¼Œé”®å…¥å‘½ä»¤åéƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ï¼Œä½¿ç”¨äº†<code>scrollIntoView</code>apiï¼Œä½œç”¨æ˜¯è®©è°ƒç”¨è¿™ä¸ªapiçš„å®¹å™¨å§‹ç»ˆåœ¨é¡µé¢å¯è§ï¼Œ<code>block</code>å‚æ•°è®¾ç½®ä¸º<code>end</code>è¡¨ç¤ºå‚ç›´æ–¹å‘æœ«ç«¯å¯¹å…¶å³æœ€åº•ç«¯ã€‚</p>


```tsx
const containerRef = useRef&lt;HTMLDivElement&gt;(null)
useEffect(() =&gt; {
  containerRef.current?.scrollIntoView({
    behavior: 'smooth',
    block: 'end'
  })
}, [typedCmds])

```




### MDX

            
<blockquote>
<p>ä½•ä¸º<code>mdx</code>ï¼Ÿå³ç»™<code>md</code>æ·»åŠ äº†<code>jsx</code>æ”¯æŒï¼ŒåŠŸèƒ½æ›´å¼ºå¤§çš„mdï¼Œåœ¨nextjsä¸­é€šè¿‡<code>@next/mdx</code>è§£æ<code>.mdx</code>æ–‡ä»¶ï¼Œå®ƒä¼šå°†<code>md</code>å’Œ<code>react components</code>è½¬æˆ<code>html</code></p>
</blockquote>
<p>å®‰è£…ç›¸å…³åŒ…ï¼Œåä¸¤è€…ä½œä¸º<code>@next/mdx</code>çš„<code>peerDependencies</code></p>
<ul>
<li><code>@next/mdx</code></li>
<li><code>@mdx-js/loader</code></li>
<li><code>@mdx-js/react</code></li>
</ul>
<p>åœ¨<code>next.config.js</code>æ–°å¢<code>createMDX</code>é…ç½®</p>


```js
// next.config.js

import createMDX from '@next/mdx'

const nextConfig = {}

const withMDX = createMDX()
export default withMDX(nextConfig)

```


<p>æ¥ç€åœ¨åº”ç”¨æ ¹ç›®å½•ä¸‹æ–°å»º<code>mdx-components.tsx</code></p>


```ts
// mdx-components.tsx

import type { MDXComponents } from 'mdx/types'

export function useMDXComponents(components: MDXComponents): MDXComponents {
  return {
    ...components
  }
}

```


<p>åœ¨<code>app</code>ç›®å½•ä¸‹ä½¿ç”¨<code>.mdx</code>æ–‡ä»¶ï¼Œ<code>useMDXComponents</code>ç»„ä»¶æ˜¯å¿…è¦çš„ï¼Œ</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯æ­¤æ–‡ä»¶å‘½åä¸Šæœ‰ä¸€å®šè§„èŒƒåªèƒ½å‘½åä¸º<code>mdx-components</code>ï¼Œä¸èƒ½ä¸ºå…¶ä»–åç§°ï¼Œä¹Ÿä¸å¯ä¸º<code>MdxComponents</code>ï¼Œä»<code>@next/mdx</code>æºç ä¸­å¯ä»¥çœ‹å‡ºä¼šå»åº”ç”¨æ ¹ç›®å½•æŸ¥æ‰¾<code>mdx-components</code>ã€‚</p>


```js
// @next/mdxéƒ¨åˆ†æºç 

config.resolve.alias['next-mdx-import-source-file'] = [
  'private-next-root-dir/src/mdx-components',
  'private-next-root-dir/mdx-components',
  '@mdx-js/react'
]

```


<p>è‡³æ­¤å°±å¯ä»¥åœ¨appä¸­ä½¿ç”¨<code>mdx</code>ã€‚</p>


### æ’ç‰ˆ

            
<blockquote>
<p>ä¸ºmdxè§£ææˆçš„htmlæ·»åŠ æ ·å¼</p>
</blockquote>
<p>è§£æmdxä¸ºhtmlï¼Œä½†å¹¶æ²¡æœ‰æ ·å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å€ŸåŠ©<code>@tailwindcss/typography</code>æ¥ä¸ºå…¶æ·»åŠ æ ·å¼ï¼Œåœ¨<code>tailwind.config.js</code>ä½¿ç”¨è¯¥æ’ä»¶ã€‚</p>


```js
// tailwind.config.js

module.exports = {
  plugins: [require('@tailwindcss/typography')]
}

```


<p>åœ¨å¤–å±‚æ ‡ç­¾ä¸Šæ·»åŠ <code>prose</code>çš„classNameï¼Œ<code>prose-invert</code>ç”¨äºæš—é»‘æ¨¡å¼ã€‚</p>


```tsx
&lt;article className="prose dark:prose-invert"&gt;{mdx}&lt;/article&gt;

```


<p>ç»¼ä¸Šæˆ‘ä»¬å®ç°äº†å¯¹mdxçš„æ ·å¼æ”¯æŒï¼Œç„¶è€Œæœ‰ä¸€ç‚¹æ˜¯<code>@tailwindcss/typography</code>å¹¶ä¸ä¼šå¯¹mdxä»£ç å—ä¸­ä»£ç è¿›è¡Œé«˜äº®ã€‚</p>


### ä»£ç é«˜äº®

            
<blockquote>
<p>å†™æ–‡ç« æˆ–å¤šæˆ–å°‘éƒ½æœ‰ä»£ç ï¼Œé«˜äº®æ˜¯å¿…ä¸å¯å°‘ï¼Œé‚£ä¹ˆ<code>react-syntax-highlighter</code>è¯¥ä¸Šåœºäº†</p>
</blockquote>
<p>å®šä¹‰ä¸€ä¸ª<code>CodeHighligher</code>ç»„ä»¶</p>


```tsx
// CodeHighligher.tsx

import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter'
import {
  oneDark,
  oneLight
} from 'react-syntax-highlighter/dist/cjs/styles/prism'
import { useTheme } from 'next-themes'

export default function CodeHighligher({
  lang,
  code
}: {
  lang: string
  code: string
}) {
  const { theme } = useTheme()
  return (
    &lt;SyntaxHighlighter
      language={lang?.replace(/\language-/, '') || 'javascript'}
      style={theme === 'light' ? oneLight : oneDark}
      customStyle={{
        padding: 20,
        fontSize: 15,
        fontFamily: 'var(--font-family)'
      }}
    &gt;
      {code}
    &lt;/SyntaxHighlighter&gt;
  )
}

```


<p><code>react-syntax-highlighter</code>é«˜äº®ä»£ç å¯ç”¨<code>hljs</code>å’Œ<code>prism</code>ï¼Œæˆ‘åœ¨è¿™ä½¿ç”¨çš„<code>prism</code>ï¼Œä¸¤è€…éƒ½æœ‰ä¼—å¤šä»£ç é«˜äº®ä¸»é¢˜å¯ä¾›é€‰æ‹©ï¼Œlangå¦‚æœæ²¡æ ‡æ³¨åˆ™é»˜è®¤è®¾ç½®ä¸º<code>javascript</code>ä¹Ÿå¯ä»¥ç®€å†™ä¸º<code>js</code>ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯å¦‚æœæ˜¯ä½¿ç”¨<code>hljs</code>ï¼Œåˆ™å¿…é¡»å†™<code>javascript</code>ï¼Œä¸å¯ç®€å†™ä¸º<code>js</code>ï¼Œå¦åˆ™ä»£ç é«˜äº®å¤±è´¥ï¼Œè¿™ä¸€ç‚¹<code>prism</code>æ›´åŠ å‹å¥½ã€‚</p>
<p>åŒæ—¶å¯é€šè¿‡<code>useTheme</code>å®ç°äº®è‰²ï¼Œæš—è‰²æ¨¡å¼ä¸‹ä½¿ç”¨ä¸åŒä»£ç é«˜äº®ä¸»é¢˜ã€‚</p>
<p>ç»„ä»¶å†™å¥½äº†ï¼Œè¯¥å¦‚ä½•ä½¿ç”¨ï¼Ÿä¸Šé¢è®²åˆ°è¿‡mdxçš„è§£æï¼Œåœ¨<code>useMDXComponents</code>é‡æ–°æ¸²æŸ“<code>pre</code>æ ‡ç­¾ã€‚</p>


```tsx
// mdx-components.tsx

import type { MDXComponents } from 'mdx/types'
import CodeHighligher from '@/components/CodeHighligher'

export function useMDXComponents(components: MDXComponents): MDXComponents {
  return {
    pre: ({ children }) =&gt; {
      const { className, children: code } = props
      return &lt;CodeHighligher lang={className} code={code} /&gt;
    }
  }
}

```


<p>mdxæ–‡ä»¶ä¸­ä»£ç å—ä¼šè¢«è§£ææˆ<code>pre</code>æ ‡ç­¾ï¼Œå¯ä»¥å¯¹<code>pre</code>æ ‡ç­¾è¿”å›å€¼ä½œè¿›ä¸€æ­¥å¤„ç†ï¼Œå³è¿”å›é«˜äº®ç»„ä»¶ï¼Œè¿™æ ·å¯å®ç°å¯¹ä»£ç é«˜äº®ï¼Œå½“ç„¶é«˜äº®ä¸»é¢˜å¾ˆå¤šï¼Œé€‰è‡ªå·±å–œæ¬¢çš„ã€‚</p>


### æ–‡ç« 

            


#### å…ƒæ•°æ®

            
<blockquote>
<p>æ–‡ç« ä¸€äº›ä¿¡æ¯å¦‚æ ‡é¢˜ï¼Œæè¿°ï¼Œæ—¥æœŸï¼Œä½œè€…ç­‰éƒ½ä½œä¸ºæ–‡ç« çš„å…ƒæ•°æ®ï¼Œä½¿ç”¨<code>yaml</code>è¯­æ³•å®šä¹‰</p>
</blockquote>


```yaml
---
title: 'æ–‡ç« æ ‡é¢˜'
description: 'æ–‡ç« æè¿°'
date: '2020-01-01'
---

```


<p>@next/mdxé»˜è®¤ä¸ä¼šæŒ‰ç…§<code>yaml</code>è¯­æ³•è§£æï¼Œè¿™ä¼šè¢«è§£ææˆ<code>h2</code>æ ‡ç­¾ï¼Œç„¶è€Œæˆ‘ä»¬å¹¶ä¸å¸Œæœ›å…ƒæ•°æ®è¢«è§£ææˆh2æ ‡ç­¾ä½œä¸ºå†…å®¹å±•ç¤ºï¼Œæ›´å¸Œæœ›æ‹¿è¿™ç±»æ•°æ®åšå…¶ä»–å¤„ç†ï¼Œ
ä¸ºäº†æ­£ç¡®è§£æ<code>yaml</code>ï¼Œéœ€è¦å€ŸåŠ©<code>remark-frontmatter</code>æ¥å®ç°ã€‚</p>
<p>ä½¿ç”¨è¯¥æ’ä»¶ï¼Œæ³¨æ„éœ€è¦ä¿®æ”¹nexté…ç½®æ–‡ä»¶åä¸º<code>next.config.mjs</code>ï¼Œå› ä¸º<code>remark-frontmatter</code>åªæ”¯æŒ<code>ESM</code>è§„èŒƒã€‚</p>


```js
// next.config.mjs

import createMDX from '@next/mdx'
import frontmatter from 'remark-frontmatter'

const nextConfig = {}

const withMDX = createMDX({
  options: {
    remarkPlugins: [frontmatter]
  }
})
export default withMDX(nextConfig)

```


<p>yamlè¢«æ­£ç¡®è§£æäº†é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>gray-matter</code>æ¥è·å–æ–‡ç« å…ƒæ•°æ®</p>


#### åˆ—è¡¨

            
<p>ç”±äºappç›®å½•æ˜¯è¿è¡Œåœ¨<code>nodejs runtime</code>ä¸‹ï¼ŒåŸºæœ¬æ€è·¯æ˜¯ç”¨nodejsçš„<code>fs</code>æ¨¡å—å»è¯»å–æ–‡ç« ç›®å½•å³<code>mdxs/posts</code>ï¼Œè¯»å–è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ç« æ”¾åœ¨ä¸€ä¸ªlistä¸­ã€‚</p>
<p>ä½¿ç”¨<code>fs.readdirSync</code>è¯»å–æ–‡ç« ç›®å½•å†…å®¹ï¼Œä½†æ˜¯è¿™ä»…ä»…æ˜¯æ‹¿åˆ°æ–‡ç« åç§°çš„é›†åˆã€‚</p>


```ts
const POST_PATH = path.join(process.cwd(), 'mdxs/posts')

// æ–‡ç« åç§°é›†åˆ
export function getPostList() {
  return fs.readdirSync(POST_PATH).map((name) =&gt; name.replace(/\.mdx/, ''))
}

```


<p>æ–‡ç« åˆ—è¡¨ä¸­å±•ç¤ºçš„æ˜¯æ ‡é¢˜è€Œä¸æ˜¯åç§°ï¼Œæ ‡é¢˜ä½œä¸ºæ–‡ç« çš„å…ƒæ•°æ®ï¼Œé€šè¿‡<code>gray-matter</code>çš„<code>read</code>apiè¯»å–æ–‡ä»¶å¯è·å–ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨<code>fs.readFileSync</code>ï¼‰ readè¿”å›<code>data</code>å’Œ<code>content</code>çš„å¯¹è±¡ï¼Œ
<code>data</code>æ˜¯å…ƒæ•°æ®ä¿¡æ¯ï¼Œ<code>content</code>åˆ™æ˜¯æ–‡ç« å†…å®¹ã€‚</p>


```ts
export function getPostMetaList() {
  const posts = getPostList()

  return posts.map((post) =&gt; {
    const {
      data: { title, description, date }
    } = matter.read(path.join(POST_PATH, `${post}.mdx`))

    // ä½¿ç”¨fs.readFileSync
    // const post = fs.readFileSync(path.join(POST_PATH, `${post}.mdx`), 'utf-8')
    // const {
    //   data: { title, description, date }
    // } = matter(post)

    return {
      slug: post,
      title,
      description,
      date
    }
  })
}

```


<p>ä¸Šè¿°æ–¹æ³•ä¸­æˆ‘ä»¬æ‹¿åˆ°äº†æ‰€æœ‰æ–‡ç« æ ‡é¢˜ï¼Œæè¿°ä¿¡æ¯ï¼Œæ—¥æœŸçš„listï¼Œæ ¹æ®listæ¸²æŸ“æ–‡ç« åˆ—è¡¨ã€‚</p>


#### è¯¦æƒ…

            
<p>æ–‡ç« åˆ—è¡¨ä¸­ä½¿ç”¨<code>Link</code>è·³è½¬åˆ°è¯¦æƒ…ï¼Œé€šè¿‡<code>dynamic</code>åŠ¨æ€åŠ è½½æ–‡ç« å¯¹åº”çš„<code>mdx</code>æ–‡ä»¶</p>


```tsx
export default function LoadMDX(props: Omit&lt;PostMetaType, 'description'&gt;) {
  const { slug, title, date } = props

  const DynamicMDX = dynamic(() =&gt; import(`@/mdxs/posts/${slug}.mdx`), {
    loading: () =&gt; &lt;p&gt;loading...&lt;/p&gt;
  })

  return (
    &lt;&gt;
      &lt;div className="mb-12"&gt;
        &lt;h1 className="mb-5 font-[600]"&gt;{title}&lt;/h1&gt;
        &lt;time className="my-0"&gt;{date}&lt;/time&gt;
      &lt;/div&gt;
      &lt;DynamicMDX /&gt;
    &lt;/&gt;
  )
}

```




### generateStaticParams

            
<blockquote>
<p>ä¼˜åŒ–æ–‡ç« åˆ—è¡¨è·³è½¬è¯¦æƒ…çš„é€Ÿåº¦</p>
</blockquote>
<p>åœ¨æ–‡ç« è¯¦æƒ…ç»„ä»¶å¯¼å‡º<code>generateStaticParams</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨æ„å»ºæ—¶é™æ€ç”Ÿæˆè·¯ç”±ï¼Œè€Œä¸æ˜¯åœ¨è¯·æ±‚æ—¶æŒ‰éœ€ç”Ÿæˆè·¯ç”±ï¼Œä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†è®¿é—®è¯¦æƒ…é¡µé€Ÿåº¦</p>


```ts
export async function generateStaticParams() {
  const posts = await fetch('https://.../posts').then((res) =&gt; res.json())

  return posts.map((post) =&gt; ({
    slug: post.slug
  }))
}

```




### éƒ¨ç½²

            
<p>é¡¹ç›®æ˜¯éƒ¨ç½²åœ¨vercelï¼Œä½¿ç”¨githubç™»å½•åæˆ‘ä»¬æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œç‚¹è¿›å»åä¼šçœ‹åˆ°<code>Import Git Repository</code>ï¼Œå¯¼å…¥å¯¹åº”ä»“åº“å³å¯ï¼Œä¹Ÿå¯ä½¿ç”¨vercelæä¾›çš„æ¨¡ç‰ˆæ–°å»ºä¸€ä¸ªï¼Œåç»­æˆ‘ä»¬æ¯æ¬¡æäº¤ä»£ç éƒ½ä¼šè‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚</p>
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/85eefd4e825b4dee81460d5c263387c4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="Alt Text" width="900" loading="lazy">
<p>æœ‰è‡ªå·±åŸŸåçš„å¯ä»¥åœ¨Domainsä¸­æ·»åŠ ï¼Œç„¶åå»åˆ°ä½ ä¹°åŸŸåçš„åœ°æ–¹æ·»åŠ å¯¹åº”DNSè§£æå³å¯ã€‚</p>


### æ€»ç»“

            
<p>å¼€å‘ä¸­é‡åˆ°äº†ä¸€äº›å‘ï¼š</p>
<ol>
<li><code>next-themes</code>æŠ¥é”™<code>Warning: Extra attributes from the server: class,style</code>ï¼Œé€šè¿‡issueså’Œçœ‹æ–‡æ¡£ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†æ–¹æ¡ˆ</li>
<li><code>mdx-components</code>ç»„ä»¶çš„å‘½åï¼Œç»å¤šæ¬¡æµ‹è¯•å‘ç°åªèƒ½å‘½åä¸º<code>mdx-components</code>ï¼Œé˜…è¯»@next/mdxçš„æºç ä¹ŸéªŒè¯äº†</li>
<li>è¯­æ³•é«˜äº®ï¼Œå¼€å§‹ä½¿ç”¨çš„<code>hljs</code>ï¼Œmdxä¸­çš„ä»£ç å—å†™çš„<code>js</code>ï¼Œéƒ¨ç½²åˆ°çº¿ä¸Šåå‘ç°ä»£ç å¹¶æ²¡æœ‰é«˜äº®ï¼Œç„¶åæ”¹ç”¨äº†<code>prism</code>æ­£å¸¸é«˜äº®ï¼Œ
åˆæ˜¯é˜…è¯»äº†<code>react-syntax-highlighter</code>æºç å‘ç°hljsçš„è¯­è¨€é›†åˆä¸­å¹¶æ²¡æœ‰<code>js</code>ï¼Œæ‰€ä»¥æ— æ³•æ­£ç¡®è§£æï¼Œåªèƒ½å†™æˆ<code>javascript</code>ï¼Œè€Œ<code>prism</code>ä¸¤è€…å†™æ³•éƒ½æ”¯æŒ</li>
<li>é¦–é¡µçš„<code>posts</code>å‘½ä»¤æ˜¯è¿è¡Œåœ¨å®¢æˆ·ç«¯ç»„ä»¶ä¸­ï¼Œfsæ— æ³•ä½¿ç”¨ï¼Œå› æ­¤è·å–æ–‡ç« çš„æ–¹æ¡ˆä½¿ç”¨fetchè¯·æ±‚api</li>
<li>ä½¿ç”¨<code>remark-frontmatter</code>è§£æyamlæ— æ³•å’Œ<code>mdxRs: true</code>åŒæ—¶ä½¿ç”¨ï¼Œå¦åˆ™è§£æå¤±è´¥ã€‚æ·»åŠ æ­¤é…ç½®é¡¹è¡¨ç¤ºä½¿ç”¨åŸºäº<code>rust</code>çš„è§£æå™¨æ¥è§£æ<code>mdx</code>ï¼Œå¯èƒ½æ˜¯è¿˜æœªæ”¯æŒçš„ç¼˜æ•…</li>
</ol>


```js
module.exports = withMDX({
  experimental: {
    mdxRs: true
  }
})

```


<p>åç»­æ›´æ–°ï¼š</p>
<ol>
<li>ä¼šæ–°å¢<code>Weekly</code>å‘¨åˆŠæ¨¡å—ï¼Œå…³æ³¨å‰ç«¯æŠ€æœ¯çš„æ›´æ–°</li>
<li>æ–‡ç« è¯¦æƒ…é¡µæ·»åŠ ä¸Šä¸€ç¯‡å’Œä¸‹ä¸€ç¯‡ï¼Œæ›´æ–¹ä¾¿çš„é˜…è¯»æ–‡ç« </li>
</ol>


### è¯•ä¸€è¯• ğŸ‘‰Yucihent

            


### åšå®¢æºç  ğŸ‘‰github

            
