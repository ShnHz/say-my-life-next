<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>忘记 localStorage 吧，indexedDB 才是前端存储新宠！ | 野宁新之助</title>
    <meta name="description" content="Think twice before you do.">
    <link rel="preload stylesheet" href="/assets/style.e7418ffe.css" as="style">
    <script type="module" src="/assets/app.142617d9.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/assets/chunks/framework.7114eebe.js">
  <link rel="modulepreload" href="/assets/chunks/theme.ddc22abe.js">
  <link rel="modulepreload" href="/assets/chunks/Valine.min.ec156000.js">
  <link rel="modulepreload" href="/assets/chunks/index.2664c616.js">
  <link rel="modulepreload" href="/assets/views_blog_js_WangJilocalStorageBaindexedDBCaiShiQianDuanCunChuXinChong.md.791377f2.lean.js">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><!--[--><div class="Layout is-blog" data-v-b2cf3e0b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-b8b11faa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-b8b11faa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-b2cf3e0b data-v-7e5bc4a5><div class="VPNavBar" data-v-7e5bc4a5 data-v-7683ced7><div class="container" data-v-7683ced7><div class="title" data-v-7683ced7><div class="VPNavBarTitle" data-v-7683ced7 data-v-4d981103><a class="title" href="/" data-v-4d981103><!--[--><!--]--><!----><!--[-->野宁新之助<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-7683ced7><div class="curtain" data-v-7683ced7></div><div class="content-body" data-v-7683ced7><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-7683ced7><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-7683ced7 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-7f418b0f data-v-5e623618 data-v-8f4dc553><!--[-->首页<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/views/Guide.html" tabindex="0" data-v-7f418b0f data-v-5e623618 data-v-8f4dc553><!--[-->归档<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/views/Tag.html" tabindex="0" data-v-7f418b0f data-v-5e623618 data-v-8f4dc553><!--[-->标签<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/views/notes/Web.html" tabindex="0" data-v-7f418b0f data-v-5e623618 data-v-8f4dc553><!--[-->笔记<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/views/life/Anime.html" tabindex="0" data-v-7f418b0f data-v-5e623618 data-v-8f4dc553><!--[-->生活<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/views/travel/Overview.html" tabindex="0" data-v-7f418b0f data-v-5e623618 data-v-8f4dc553><!--[-->旅程<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/views/Friend.html" tabindex="0" data-v-7f418b0f data-v-5e623618 data-v-8f4dc553><!--[-->友链<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-7683ced7 data-v-f6a63727><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-f6a63727 data-v-82b282f1 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-82b282f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-82b282f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-7683ced7 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink" href="https://github.com/ShnHz" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-36371990><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=664652740&amp;website=www.oicqzone.com" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-36371990><svg id="social-qq" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve"><ellipse cx="12" cy="12" rx="12" ry="11.7" /> <path fill="#FFFFFF" d="M19.5,16.8c-0.4-1.2-0.8-2.3-1.5-3.9c0.1-4.4-1.7-8-6-8c-4.3,0-6.1,3.6-6,8c-0.7,1.7-1.1,2.7-1.5,3.9c-0.8,2.6-0.5,3.7-0.3,3.7c0.4,0.1,1.7-2,1.7-2c0,1.2,0.6,2.7,1.9,3.8c-0.6,0.2-2,0.7-1.7,1.3c0.3,0.5,4.7,0.3,5.9,0.2c1.3,0.1,5.7,0.3,5.9-0.2c0.3-0.6-1.1-1.1-1.7-1.3c1.3-1.1,1.9-2.6,1.9-3.8c0,0,1.2,2,1.7,2C20,20.5,20.3,19.4,19.5,16.8z" /></svg></a><a class="VPSocialLink" href="mailto:hzshn664652740@gmail.com" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-36371990><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><path d="M12.72 2.03A9.991 9.991 0 0 0 2.03 12.72C2.39 18.01 7.01 22 12.31 22H16c.55 0 1-.45 1-1s-.45-1-1-1h-3.67c-3.73 0-7.15-2.42-8.08-6.03c-1.49-5.8 3.91-11.21 9.71-9.71C17.58 5.18 20 8.6 20 12.33v1.1c0 .79-.71 1.57-1.5 1.57s-1.5-.78-1.5-1.57v-1.25c0-2.51-1.78-4.77-4.26-5.12a5.008 5.008 0 0 0-5.66 5.87a4.996 4.996 0 0 0 3.72 3.94c1.84.43 3.59-.16 4.74-1.33c.89 1.22 2.67 1.86 4.3 1.21c1.34-.53 2.16-1.9 2.16-3.34v-1.09c0-5.31-3.99-9.93-9.28-10.29zM12 15c-1.66 0-3-1.34-3-3s1.34-3 3-3s3 1.34 3 3s-1.34 3-3 3z" fill="currentColor"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-7683ced7 data-v-40855f84 data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-764effdf><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-764effdf><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-82b282f1 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-82b282f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-82b282f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-7bc22406><!--[--><a class="VPSocialLink" href="https://github.com/ShnHz" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-36371990><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=664652740&amp;website=www.oicqzone.com" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-36371990><svg id="social-qq" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve"><ellipse cx="12" cy="12" rx="12" ry="11.7" /> <path fill="#FFFFFF" d="M19.5,16.8c-0.4-1.2-0.8-2.3-1.5-3.9c0.1-4.4-1.7-8-6-8c-4.3,0-6.1,3.6-6,8c-0.7,1.7-1.1,2.7-1.5,3.9c-0.8,2.6-0.5,3.7-0.3,3.7c0.4,0.1,1.7-2,1.7-2c0,1.2,0.6,2.7,1.9,3.8c-0.6,0.2-2,0.7-1.7,1.3c0.3,0.5,4.7,0.3,5.9,0.2c1.3,0.1,5.7,0.3,5.9-0.2c0.3-0.6-1.1-1.1-1.7-1.3c1.3-1.1,1.9-2.6,1.9-3.8c0,0,1.2,2,1.7,2C20,20.5,20.3,19.4,19.5,16.8z" /></svg></a><a class="VPSocialLink" href="mailto:hzshn664652740@gmail.com" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-36371990><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><path d="M12.72 2.03A9.991 9.991 0 0 0 2.03 12.72C2.39 18.01 7.01 22 12.31 22H16c.55 0 1-.45 1-1s-.45-1-1-1h-3.67c-3.73 0-7.15-2.42-8.08-6.03c-1.49-5.8 3.91-11.21 9.71-9.71C17.58 5.18 20 8.6 20 12.33v1.1c0 .79-.71 1.57-1.5 1.57s-1.5-.78-1.5-1.57v-1.25c0-2.51-1.78-4.77-4.26-5.12a5.008 5.008 0 0 0-5.66 5.87a4.996 4.996 0 0 0 3.72 3.94c1.84.43 3.59-.16 4.74-1.33c.89 1.22 2.67 1.86 4.3 1.21c1.34-.53 2.16-1.9 2.16-3.34v-1.09c0-5.31-3.99-9.93-9.28-10.29zM12 15c-1.66 0-3-1.34-3-3s1.34-3 3-3s3 1.34 3 3s-1.34 3-3 3z" fill="currentColor"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-7683ced7 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><!----><!----><div class="VPContent" id="VPContent" data-v-b2cf3e0b data-v-a494bd1d><div class="VPDoc has-aside" data-v-a494bd1d data-v-3de533b6><!--[--><!--]--><div class="container" data-v-3de533b6><div class="aside" data-v-3de533b6><div class="aside-curtain" data-v-3de533b6></div><div class="aside-container" data-v-3de533b6><div class="aside-content" data-v-3de533b6><div class="VPDocAside" data-v-3de533b6 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-3f215769 data-v-ff0f39c8><div class="content" data-v-ff0f39c8><div class="outline-marker" data-v-ff0f39c8></div><div class="outline-title" data-v-ff0f39c8>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-ff0f39c8><span class="visually-hidden" id="doc-outline-aria-label" data-v-ff0f39c8> Table of Contents for current page </span><ul class="root" data-v-ff0f39c8 data-v-9a431c33><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-3de533b6><div class="content-container" data-v-3de533b6><!--[--><!--[--><!--[--><div class="container blog-title-wrap" data-v-10852a47><div class="content-container" data-v-10852a47><div class="blog-title" data-v-10852a47>忘记 localStorage 吧，indexedDB 才是前端存储新宠！</div><div class="blog-th-wrap" data-v-10852a47><span data-v-10852a47><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" data-v-10852a47><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z" fill="currentColor" data-v-10852a47></path></svg> 2023/08/03 11:57:47</span><span data-v-10852a47><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" data-v-10852a47><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-10852a47><circle cx="8.5" cy="8.5" r="1" fill="currentColor" data-v-10852a47></circle><path d="M4 7v3.859c0 .537.213 1.052.593 1.432l8.116 8.116a2.025 2.025 0 0 0 2.864 0l4.834-4.834a2.025 2.025 0 0 0 0-2.864L12.29 4.593A2.025 2.025 0 0 0 10.859 4H7a3 3 0 0 0-3 3z" data-v-10852a47></path></g></svg> 转发,Js</span><span class="leancloud_comments" id="/blog/js/WangJilocalStorageBaindexedDBCaiShiQianDuanCunChuXinChong.html" data-v-10852a47><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16" data-v-10852a47><g fill="none" data-v-10852a47><path d="M3.05 3A2.5 2.5 0 0 1 5.5 1H12a3 3 0 0 1 3 3v4.5a2.5 2.5 0 0 1-2 2.45V11a2 2 0 0 1-2 2H7.16l-2.579 1.842A1 1 0 0 1 3 14.028V13a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h.05zm1.035 0H11a2 2 0 0 1 2 2v4.915A1.5 1.5 0 0 0 14 8.5V4a2 2 0 0 0-2-2H5.5a1.5 1.5 0 0 0-1.415 1zM12 11V5a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h1v2.028L6.84 12H11a1 1 0 0 0 1-1z" fill="currentColor" data-v-10852a47></path></g></svg><i class="valine-comment-count" data-xid="/blog/js/WangJilocalStorageBaindexedDBCaiShiQianDuanCunChuXinChong.html" data-v-10852a47></i></span><span class="leancloud_visitors" id="/blog/js/WangJilocalStorageBaindexedDBCaiShiQianDuanCunChuXinChong.html" data-v-10852a47><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16" data-v-10852a47><g fill="none" data-v-10852a47><path d="M2 4a2 2 0 0 1 2-2h1.5a.5.5 0 0 1 0 1H4a1 1 0 0 0-1 1v1.5a.5.5 0 0 1-1 0V4zm0 8a2 2 0 0 0 2 2h1.5a.5.5 0 0 0 0-1H4a1 1 0 0 1-1-1v-1.5a.5.5 0 0 0-1 0V12zM12 2a2 2 0 0 1 2 2v1.5a.5.5 0 0 1-1 0V4a1 1 0 0 0-1-1h-1.5a.5.5 0 0 1 0-1H12zm2 10a2 2 0 0 1-2 2h-1.5a.5.5 0 0 1 0-1H12a1 1 0 0 0 1-1v-1.5a.5.5 0 0 1 1 0V12zM5.5 9a2.5 2.5 0 1 1 5 0a2.5 2.5 0 0 1-5 0zM3.314 7.964a.5.5 0 0 0 .65-.278v.001l.005-.011l.028-.06c.027-.055.072-.137.136-.24a3.73 3.73 0 0 1 .64-.756C5.376 6.073 6.384 5.5 8 5.5c1.617 0 2.624.573 3.226 1.12c.305.277.512.553.64.757a2.752 2.752 0 0 1 .165.299s.244.452.655.288a.5.5 0 0 0 .278-.65c-.107-.223 0 0 0 0v-.002l-.002-.004l-.005-.01a1.809 1.809 0 0 0-.06-.129a3.783 3.783 0 0 0-.186-.327a4.733 4.733 0 0 0-.812-.962c-.774-.703-2.017-1.38-3.9-1.38c-1.882 0-3.125.677-3.898 1.38a4.73 4.73 0 0 0-.813.962a3.753 3.753 0 0 0-.246.456l-.004.01l-.002.005v.001a.5.5 0 0 0 .278.65z" fill="currentColor" data-v-10852a47></path></g></svg><i class="leancloud-visitors-count" data-v-10852a47></i></span></div><!----></div></div><!--]--><!--]--><!--]--><!----><main class="main" data-v-3de533b6><div style="position:relative;" class="vp-doc _views_blog_js_WangJilocalStorageBaindexedDBCaiShiQianDuanCunChuXinChong" data-v-3de533b6><div><h6 id="原文-掘金" tabindex="-1">原文 <a href="https://juejin.cn/post/7239259798267904059" target="_blank" rel="noreferrer">掘金</a> <a class="header-anchor" href="#原文-掘金" aria-label="Permalink to &quot;原文 [掘金](https://juejin.cn/post/7239259798267904059)&quot;">​</a></h6><div class="markdown-body cache"><blockquote><p><code>原创</code> 冯希才 / 叫叫技术团队</p></blockquote><h1 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h1><p>在项目开发过程中，前端需要存储大量的数据。cookie, localstorage 都有存储长度限制。<br><strong>表格一览</strong></p><table><thead><tr><th>特性</th><th>cookie</th><th>localStorage</th><th>sessionStorage</th><th>indexedDB</th></tr></thead><tbody><tr><td>数据生命周期</td><td>一般由服务器生成，可以设置过期时间；前端采用和js-cookie等组件也可以生成</td><td>除非被清理，否则一直存在；浏览器关闭还会保存在本地，但是不支持跨浏览器</td><td>页面关闭就清理刷新依然存在，不支持跨页面交互</td><td>除非被清理，否则一直存在</td></tr><tr><td>数据存储大小</td><td>4K</td><td>5M</td><td>5M</td><td>不限制大小</td></tr><tr><td>与服务端通信</td><td>每次都会携带在请求的header 中，对于请求性能有影响；同时由于请求中都带有，所以也容易出现安全问题</td><td>不参与</td><td>不参与</td><td>不参与</td></tr><tr><td>特点</td><td>字符串键值对在本地存储数据</td><td>字符串键值对在本地存储数据</td><td>字符串键值对在本地存储数据</td><td>IndexedDB 是一个非关系型数据库（不支持通过 SQL 语句操作）。可以存储大量数据，提供接口来查询，还可以建立索引，这些都是其他存储方案无法提供的能力。</td></tr></tbody></table><p>需要一个存储容量大，支持搜索和自定义索引的前端存储方案，就选用了 。<br>caniuse上查看 indexedDB 支持情况，目前浏览器支持情况良好。<br><a href="https://link.juejin.cn?target=https%3A%2F%2Fcaniuse.com%2F%3Fsearch%3DindexedDB" target="_blank" title="https://caniuse.com/?search=indexedDB">caniuse.com/?search=ind…</a><br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0fca33e3026f4594a03403453cecd1d8~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png" loading="lazy"> <a name="user-content-ATMCY" title="" href="https://link.juejin.cn?target="></a></p><h1 id="indexeddb介绍" tabindex="-1">IndexedDB介绍 <a class="header-anchor" href="#indexeddb介绍" aria-label="Permalink to &quot;IndexedDB介绍&quot;">​</a></h1><p>IndexedDB 属于非关系型数据库。（不支持SQL查询） <a name="user-content-JaGXR" title="" href="https://link.juejin.cn?target="></a></p><h2 id="特点" tabindex="-1">特点： <a class="header-anchor" href="#特点" aria-label="Permalink to &quot;特点：&quot;">​</a></h2><ul><li>键值对储存 IndexedDB 内部采用对象仓库（object store）存放数据。所有类型的数据都可以直接存入，包括 JavaScript 对象。对象仓库中，数据以&quot;键值对&quot;的形式保存，每一个数据记录都有对应的主键，主键是独一无二的，不能有重复，否则会抛出一个错误。</li><li>异步 IndexedDB 操作时不会锁死浏览器，用户依然可以进行其他操作，这与 LocalStorage 形成对比，后者的操作是同步的。异步设计是为了防止大量数据的读写，拖慢网页的表现。</li><li>支持事务 IndexedDB 支持事务（transaction），这意味着一系列操作步骤之中，只要有一步失败，整个事务就都取消，数据库回滚到事务发生之前的状态，不存在只改写一部分数据的情况。</li><li>同源限制 IndexedDB 受到同源限制，每一个数据库对应创建它的域名。网页只能访问自身域名下的数据库，而不能访问跨域的数据库。</li><li>支持二进制储存 IndexedDB 不仅可以储存字符串，还可以储存二进制数据（ArrayBuffer 对象和 Blob 对象。</li><li>储存空间大 IndexedDB 的储存空间比 LocalStorage 大得多，一般来说不少于 250MB，甚至没有上限。<strong>储 存 在 电 脑 上 中 的 位 置 为 C:\Users\当 前 的 登 录 用 户\AppData\Local\Google\Chrome\User Data\Default\IndexedDB</strong> <a name="user-content-N3oQ2" title="" href="https://link.juejin.cn?target="></a></li></ul><h2 id="核心概念" tabindex="-1">核心概念 <a class="header-anchor" href="#核心概念" aria-label="Permalink to &quot;核心概念&quot;">​</a></h2><ul><li>数据库：IDBDatabase 对象，数据库有版本概念，同一时刻只能有一个版本，每个域名可以建多个数据库</li><li>对象仓库：IDBObjectStore 对象，类似于关系型数据库的表格</li><li>索引： IDBIndex 对象，可以在对象仓库中，为不同的属性建立索引，主键建立默认索引</li><li>事务： IDBTransaction 对象，增删改查都需要通过事务来完成，事务对象提供了error,abord,complete三个回调方法，监听操作结果</li><li>操作请求：IDBRequest 对象</li><li>指针： IDBCursor 对象</li><li>主键集合：IDBKeyRange 对象，主键是默认建立索引的属性，可以取当前层级的某个属性，也可以指定下一层对象的属性，还可以是一个递增的整数</li></ul><h1 id="indexeddb使用" tabindex="-1">indexedDB使用 <a class="header-anchor" href="#indexeddb使用" aria-label="Permalink to &quot;indexedDB使用&quot;">​</a></h1><h2 id="基础操作" tabindex="-1">基础操作 <a class="header-anchor" href="#基础操作" aria-label="Permalink to &quot;基础操作&quot;">​</a></h2><h3 id="_1-创建数据库-新建表和索引" tabindex="-1">1. 创建数据库 &amp; 新建表和索引 <a class="header-anchor" href="#_1-创建数据库-新建表和索引" aria-label="Permalink to &quot;1. 创建数据库 &amp;amp; 新建表和索引&quot;">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *@databaseName 数据仓库的名字</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *@version 数据仓库的版本</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *@databaseName 数据仓库的名字</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> request </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> window</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">indexedDB</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">open</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *数据仓库打开失败</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onerror</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">error</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">IndexedDB 打开失败</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *数据仓库打开成功</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onsuccess</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">IndexedDB 打开成功</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">res</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">db</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">res</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">target</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">result</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *数据仓库升级事件(第一次新建库是也会触发，因为数据仓库从无到有算是升级了一次)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onupgradeneeded</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">IndexedDB 升级成功</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">res</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">db</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">res</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">target</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">result</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">db_table</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createObjectStore</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> keyPath</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">db_table</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createIndex</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">indexName</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> unique</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><h3 id="" tabindex="-1"><a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">​</a></h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/81fea5fff40c4cba8dfc95a5876c6c34~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png" loading="lazy"> <a name="user-content-rRGST" title="" href="https://link.juejin.cn?target="></a></p><h3 id="_2-新增数据" tabindex="-1">2. 新增数据 <a class="header-anchor" href="#_2-新增数据" aria-label="Permalink to &quot;2.  新增数据&quot;">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *新建事务</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *@params 数据仓库的数组</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *@params 写入模式</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> store </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transaction</span><span style="color:#BABED8;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">readwrite</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">objectStore</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *add方法添加数据</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *@params 需要添加的数据信息</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> request </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#BABED8;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getTime</span><span style="color:#BABED8;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">王二</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">age</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">12</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">email</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">XXXX@xxx.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *添加成功</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onsuccess</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">数据添加成功</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *添加失败</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onerror</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">数据添加失败</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><h3 id="-1" tabindex="-1"><a class="header-anchor" href="#-1" aria-label="Permalink to &quot;&quot;">​</a></h3><h3 id="-2" tabindex="-1"><a class="header-anchor" href="#-2" aria-label="Permalink to &quot;&quot;">​</a></h3><h3 id="_3-读取数据" tabindex="-1">3. 读取数据 <a class="header-anchor" href="#_3-读取数据" aria-label="Permalink to &quot;3.  读取数据&quot;">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *新建事务</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *@params 数据仓库的数组</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> store </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transaction</span><span style="color:#BABED8;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">])</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">objectStore</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *get方法获取数据</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *@params 数据的主键</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> request </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">1678664831491</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *获取成功</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onsuccess</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">target</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">result</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">数据获取成功</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">target</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">未获取到数据</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *获取失败</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onerror</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">数据获取失败</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><h3 id="-3" tabindex="-1"><a class="header-anchor" href="#-3" aria-label="Permalink to &quot;&quot;">​</a></h3><h3 id="_4-更新数据" tabindex="-1">4. 更新数据 <a class="header-anchor" href="#_4-更新数据" aria-label="Permalink to &quot;4.  更新数据&quot;">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *新建事务</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *@params 数据仓库的数组</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *@params 写入模式</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> store </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transaction</span><span style="color:#BABED8;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">readwrite</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">objectStore</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *put方法根据主键更新数据</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *@params 数据的主键</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> request </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">put</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1678664831491</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">张一</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">+</span><span style="color:#BABED8;"> Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">random</span><span style="color:#BABED8;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">age</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">24</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">email</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">zhangsan@example.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *更新成功</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onsuccess</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">数据更新成功</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *更新失败</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onerror</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">数据更新失败</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><h4 id="未加-readwrite-会抛错-修改数据失败" tabindex="-1">未加 readwrite, 会抛错，修改数据失败 <a class="header-anchor" href="#未加-readwrite-会抛错-修改数据失败" aria-label="Permalink to &quot;未加 readwrite, 会抛错，修改数据失败&quot;">​</a></h4><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0f18772e033041cfaa61d26c92039bf8~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png" loading="lazy"><br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b26fcbc3d447466f8b6d07d14892d69a~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png" loading="lazy"></p><h3 id="-4" tabindex="-1"><a class="header-anchor" href="#-4" aria-label="Permalink to &quot;&quot;">​</a></h3><h3 id="-5" tabindex="-1"><a class="header-anchor" href="#-5" aria-label="Permalink to &quot;&quot;">​</a></h3><h3 id="_5-删除数据" tabindex="-1">5. 删除数据 <a class="header-anchor" href="#_5-删除数据" aria-label="Permalink to &quot;5.  删除数据&quot;">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*新建事务</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*@params 数据仓库的数组</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> store </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transaction</span><span style="color:#BABED8;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">readwrite</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">objectStore</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*delete方法删除数据</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*@params 数据的主键</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> request </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">delete</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">1678664831491</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*删除成功</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onsuccess</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">数据删除成功</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;">event</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*删除失败</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onerror</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">数据删除失败</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;">event</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/89e3d6abbcca4efe888505747c90a3ad~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png" loading="lazy"><br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/14f700d7bec24159b214762dd3184baa~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png" loading="lazy"> <a name="user-content-EFczR" title="" href="https://link.juejin.cn?target="></a></p><h3 id="_6-使用索引" tabindex="-1">6. 使用索引 <a class="header-anchor" href="#_6-使用索引" aria-label="Permalink to &quot;6.  使用索引&quot;">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*新建事务</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*@params 数据仓库的数组</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> store </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transaction</span><span style="color:#BABED8;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">])</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">objectStore</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*index方法获取索引对象</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*get方法获取数据</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*@params 数据的索引</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> request </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">index</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">indexName</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">张四</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*获取成功</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onsuccess</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">通过索引获取数据成功</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">target</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*获取失败</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onerror</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">通过索引获取数据失败</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;">event</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e19b48f9aefc4033b2d905af3ea8f7a2~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png" loading="lazy"> <a name="user-content-Xqb2n" title="" href="https://link.juejin.cn?target="></a></p><h3 id="-6" tabindex="-1"><a class="header-anchor" href="#-6" aria-label="Permalink to &quot;&quot;">​</a></h3><h3 id="_7-获取整张表所有的data" tabindex="-1">7. 获取整张表所有的data <a class="header-anchor" href="#_7-获取整张表所有的data" aria-label="Permalink to &quot;7.  获取整张表所有的data&quot;">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> store </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transaction</span><span style="color:#BABED8;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">])</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">objectStore</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> request </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAll</span><span style="color:#BABED8;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *更新成功</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onsuccess</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">indexedDB getAll:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">target</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *更新失败</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onerror</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">indexedDB getAll:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><h3 id="-7" tabindex="-1"><a class="header-anchor" href="#-7" aria-label="Permalink to &quot;&quot;">​</a></h3><h3 id="_8-根据指定条件获取data" tabindex="-1">8. 根据指定条件获取data <a class="header-anchor" href="#_8-根据指定条件获取data" aria-label="Permalink to &quot;8.  根据指定条件获取data&quot;">​</a></h3><p>首先让我们 来了解 <code>IDBKeyRange</code> 的API<br><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3cschool.cn%2Fjavascript_guide%2Fjavascript_guide-rcfy26a4.html%23toc9" target="_blank" title="https://www.w3cschool.cn/javascript_guide/javascript_guide-rcfy26a4.html#toc9">www.w3cschool.cn/javascript_…</a><br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9325c60d4a7740a785f87cc924a89084~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png" loading="lazy"></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> store </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transaction</span><span style="color:#BABED8;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">])</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">objectStore</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 获取id名称小于当前时间的所有data</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> request </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAll</span><span style="color:#BABED8;">(IDBKeyRange</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">upperBound</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">+new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#BABED8;">()))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *更新成功</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onsuccess</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">indexedDB getAll:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">target</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *更新失败</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onerror</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">indexedDB getAll:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><h1 id="-8" tabindex="-1"><a class="header-anchor" href="#-8" aria-label="Permalink to &quot;&quot;">​</a></h1><h2 id="业务中优雅使用" tabindex="-1">业务中优雅使用 <a class="header-anchor" href="#业务中优雅使用" aria-label="Permalink to &quot;业务中优雅使用&quot;">​</a></h2><blockquote><p>indexedDB 并非无底洞，可以无限存储。要考虑做定期删除等功能</p></blockquote><h3 id="_1-定期删除失效数据" tabindex="-1">1. 定期删除失效数据 <a class="header-anchor" href="#_1-定期删除失效数据" aria-label="Permalink to &quot;1. 定期删除失效数据&quot;">​</a></h3><h4 id="_1-首先我们创建数据的时候就以时间戳-失效时间来约定id规则" tabindex="-1">1. 首先我们创建数据的时候就以时间戳+失效时间来约定id规则 <a class="header-anchor" href="#_1-首先我们创建数据的时候就以时间戳-失效时间来约定id规则" aria-label="Permalink to &quot;1. 首先我们创建数据的时候就以时间戳+失效时间来约定id规则&quot;">​</a></h4><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c18e9e642a8944c4b784a3c2af451622~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png" loading="lazy"> <a name="user-content-b8pGR" title="" href="https://link.juejin.cn?target="></a></p><h4 id="_2-再通过上面基础操作的getall方法-获取指定条件的data-再遍历data-调用删除数据api" tabindex="-1">2. 再通过上面基础操作的getAll方法，获取指定条件的data，再遍历data，调用删除数据API <a class="header-anchor" href="#_2-再通过上面基础操作的getall方法-获取指定条件的data-再遍历data-调用删除数据api" aria-label="Permalink to &quot;2. 再通过上面基础操作的getAll方法，获取指定条件的data，再遍历data，调用删除数据API&quot;">​</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> store </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transaction</span><span style="color:#BABED8;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">readwrite</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">objectStore</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> request </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAll</span><span style="color:#BABED8;">(IDBKeyRange</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">upperBound</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">+new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#BABED8;">()))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *更新成功</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onsuccess</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">indexedDB getAll:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">indexedDB getAll:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">target</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">target</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">result</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">item</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=&amp;</span><span style="color:#BABED8;">gt</span><span style="color:#F07178;">; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    console.log(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">删除数据</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> item);</span></span>
<span class="line"><span style="color:#F07178;">    const </span><span style="color:#BABED8;">deletRequest</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">delete</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">item</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">id</span><span style="color:#F07178;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     *删除成功</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     */</span></span>
<span class="line"><span style="color:#F07178;">    deletRequest.</span><span style="color:#82AAFF;">onsuccess</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">数据删除成功</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     *删除失败</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     */</span></span>
<span class="line"><span style="color:#F07178;">    deletRequest.</span><span style="color:#82AAFF;">onerror</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">数据删除失败</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">event</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *更新失败</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#BABED8;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onerror</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{};</span></span></code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1fe08aa09fd4b54ac8aa09683bbef34~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png" loading="lazy"> <a name="user-content-kBrV3" title="" href="https://link.juejin.cn?target="></a></p><h4 id="_3-我们把上述方法包装下每次打开页面-清空下失效数据。就可以实现一个定期删除失效数据的方法啦" tabindex="-1">3. 我们把上述方法包装下每次打开页面，清空下失效数据。就可以实现一个定期删除失效数据的方法啦 <a class="header-anchor" href="#_3-我们把上述方法包装下每次打开页面-清空下失效数据。就可以实现一个定期删除失效数据的方法啦" aria-label="Permalink to &quot;3. 我们把上述方法包装下每次打开页面，清空下失效数据。就可以实现一个定期删除失效数据的方法啦&quot;">​</a></h4><h3 id="_2-批量添加数据" tabindex="-1">2. 批量添加数据 <a class="header-anchor" href="#_2-批量添加数据" aria-label="Permalink to &quot;2. 批量添加数据&quot;">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> TestData </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> [</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">event</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">NE-TEST1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">level</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">warning</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">errorCode</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://www.example.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">time</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2017/11/8 下午4:53:039</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">isUploaded</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">event</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">NE-TEST2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">msg</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">测试2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">level</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">errorCode</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://www.example.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">time</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2017/11/8 下午4:53:042</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">isUploaded</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">event</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">NE-TEST3</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">msg</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">测试3</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">level</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">info</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">errorCode</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">3000</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://www.example.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">time</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2017/11/8 下午4:53:043</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">isUploaded</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">event</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">NE-TEST4</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">mgs</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">测试4</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">level</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">info</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://www.example.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">time</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2017/11/8 下午4:53:0423</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">isUploaded</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">  ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* 添加数据</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">array</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#BABED8;font-style:italic;">docs</span><span style="color:#676E95;font-style:italic;"> 要添加数据</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">string</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#BABED8;font-style:italic;">objName</span><span style="color:#676E95;font-style:italic;"> 仓库名称</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">addData</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">docs</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">objName</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">docs</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#BABED8;">amp</span><span style="color:#F07178;">;</span><span style="color:#89DDFF;">&amp;</span><span style="color:#BABED8;">amp</span><span style="color:#F07178;">; </span><span style="color:#BABED8;">docs</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">length</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">docs must be a array!</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">openIndexedDB</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">db</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=&amp;</span><span style="color:#BABED8;">gt</span><span style="color:#F07178;">; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      const </span><span style="color:#BABED8;">tx</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transaction</span><span style="color:#F07178;">([</span><span style="color:#BABED8;">objName</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">readwrite</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      tx.</span><span style="color:#BABED8;">oncomplete</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">e</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=&amp;</span><span style="color:#BABED8;">gt</span><span style="color:#F07178;">; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        console.log(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">tx:addData onsuccess</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> e)</span></span>
<span class="line"><span style="color:#F07178;">        return Promise.resolve(docs)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">      tx.</span><span style="color:#BABED8;">onerror</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">e</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=&amp;</span><span style="color:#BABED8;">gt</span><span style="color:#F07178;">; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        e.stopPropagation()</span></span>
<span class="line"><span style="color:#F07178;">        console.error(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">tx:addData onerror</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> e.target.error)</span></span>
<span class="line"><span style="color:#F07178;">        return Promise.reject(e.target.error)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">      tx.</span><span style="color:#BABED8;">onabort</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">e</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=&amp;</span><span style="color:#BABED8;">gt</span><span style="color:#F07178;">; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        console.warn(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">tx:addData abort</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> e.target)</span></span>
<span class="line"><span style="color:#F07178;">        return Promise.reject(e.target.error)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">      const </span><span style="color:#BABED8;">obj</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">tx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">objectStore</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">objName</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      docs.forEach(</span><span style="color:#BABED8;">doc</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=&amp;</span><span style="color:#BABED8;">gt</span><span style="color:#F07178;">; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        const </span><span style="color:#BABED8;">req</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">obj</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">doc</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         * NOTE:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         * request</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         * 两个事件：</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         * 1. success</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         * 2. error</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         */</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// req.onsuccess = e =&amp;gt; console.log(&#39;obj:addData onsuccess&#39;, e.target)</span></span>
<span class="line"><span style="color:#F07178;">        req.</span><span style="color:#BABED8;">onerror</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">e</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=&amp;</span><span style="color:#BABED8;">gt</span><span style="color:#F07178;">; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          console.error(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">obj:addData onerror</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> e.target.error)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#82AAFF;">addData</span><span style="color:#BABED8;">(TestData</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> OB_NAMES</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">UseKeyGenerator)</span></span>
<span class="line"><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#BABED8;">(() </span><span style="color:#89DDFF;">=&amp;</span><span style="color:#BABED8;">gt; </span><span style="color:#82AAFF;">addData</span><span style="color:#BABED8;">(TestData</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> OB_NAMES</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">UseKeyPath))</span></span></code></pre></div><h1 id="结尾" tabindex="-1">结尾 <a class="header-anchor" href="#结尾" aria-label="Permalink to &quot;结尾&quot;">​</a></h1><h2 id="一些封装好的库" tabindex="-1">一些封装好的库 <a class="header-anchor" href="#一些封装好的库" aria-label="Permalink to &quot;一些封装好的库&quot;">​</a></h2><h3 id="localforage-推荐-⭐️⭐️⭐️⭐️⭐️-我们当前业务就用的这个" tabindex="-1">localforage 推荐 ⭐️⭐️⭐️⭐️⭐️ （我们当前业务就用的这个~） <a class="header-anchor" href="#localforage-推荐-⭐️⭐️⭐️⭐️⭐️-我们当前业务就用的这个" aria-label="Permalink to &quot;localforage  推荐 ⭐️⭐️⭐️⭐️⭐️ （我们当前业务就用的这个~）&quot;">​</a></h3><p>和<code>localsotrage</code>使用保持一致，更适合前端使用<br><a href="https://juejin.cn/post/6907615220517208078" target="_blank" title="https://juejin.cn/post/6907615220517208078">还在用localStorage?快来试试localForage吧！ - 掘金</a> <a name="user-content-D8jXS" title="" href="https://link.juejin.cn?target="></a></p><h3 id="indexeddbwrapper-推荐-⭐️⭐️⭐️" tabindex="-1">IndexedDBWrapper 推荐 ⭐️⭐️⭐️ <a class="header-anchor" href="#indexeddbwrapper-推荐-⭐️⭐️⭐️" aria-label="Permalink to &quot;IndexedDBWrapper 推荐  ⭐️⭐️⭐️&quot;">​</a></h3><h2 id="思考我们还可以用indexeddb做什么" tabindex="-1">思考我们还可以用indexedDB做什么 <a class="header-anchor" href="#思考我们还可以用indexeddb做什么" aria-label="Permalink to &quot;思考我们还可以用indexedDB做什么&quot;">​</a></h2><h3 id="_1-用户使用日志收集" tabindex="-1">1. 用户使用日志收集 <a class="header-anchor" href="#_1-用户使用日志收集" aria-label="Permalink to &quot;1.  用户使用日志收集&quot;">​</a></h3><h4 id="在做一些前端electron应用-webapp-我们可以定义一个log日志库-来收集用户日志-遇到问题时-可以让用户-打包上传到日志库-排查跟进解决用户反馈问题。" tabindex="-1">在做一些前端electron应用，webApp,我们可以定义一个log日志库，来收集用户日志，遇到问题时，可以让用户，打包上传到日志库，排查跟进解决用户反馈问题。 <a class="header-anchor" href="#在做一些前端electron应用-webapp-我们可以定义一个log日志库-来收集用户日志-遇到问题时-可以让用户-打包上传到日志库-排查跟进解决用户反馈问题。" aria-label="Permalink to &quot;在做一些前端electron应用，webApp,我们可以定义一个log日志库，来收集用户日志，遇到问题时，可以让用户，打包上传到日志库，排查跟进解决用户反馈问题。&quot;">​</a></h4><h5 id="定义日志上报结构" tabindex="-1">定义日志上报结构 <a class="header-anchor" href="#定义日志上报结构" aria-label="Permalink to &quot;定义日志上报结构&quot;">​</a></h5><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 定义log基本结构</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> LogItem </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">	</span><span style="color:#F07178;">level</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">log</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">info</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">...,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">tag</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">request</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">system</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> ‘video’ </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">audio</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">domClick</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">...</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">	</span><span style="color:#F07178;">msg</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">...,</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// any</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">date</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">+new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#BABED8;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">	</span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="导出所有数据-并上传" tabindex="-1">导出所有数据，并上传 <a class="header-anchor" href="#导出所有数据-并上传" aria-label="Permalink to &quot;导出所有数据，并上传&quot;">​</a></h5><p>此处就可以用上面的 <code>getAll </code>方法，获取该表所有数据，生成<code>json</code>打包上传到自己公司的日志库。</p><h3 id="_2-request层封装-对不长更新接口缓存" tabindex="-1">2. request层封装，对不长更新接口缓存 <a class="header-anchor" href="#_2-request层封装-对不长更新接口缓存" aria-label="Permalink to &quot;2. request层封装，对不长更新接口缓存&quot;">​</a></h3><p>封装request方法，缓存请求接口，物理缓存数据~让页面接口数据加载飞起来 <a name="user-content-DbRcr" title="" href="https://link.juejin.cn?target="></a></p><h3 id="_3-大文件上传-分片-避免网络失败-刷新页面等导致中断问题" tabindex="-1">3. 大文件上传，分片，避免网络失败，刷新页面等导致中断问题 <a class="header-anchor" href="#_3-大文件上传-分片-避免网络失败-刷新页面等导致中断问题" aria-label="Permalink to &quot;3. 大文件上传，分片，避免网络失败，刷新页面等导致中断问题&quot;">​</a></h3><p>文件切片后先存储到<code>indexedDB</code>库，动态更新上传状态，异常状况可取出再继续定位到未上传的切片继续上传 <a name="user-content-sUXlc" title="" href="https://link.juejin.cn?target="></a></p><h1 id="附言" tabindex="-1">附言 <a class="header-anchor" href="#附言" aria-label="Permalink to &quot;附言&quot;">​</a></h1><h2 id="参考文档" tabindex="-1">参考文档 <a class="header-anchor" href="#参考文档" aria-label="Permalink to &quot;参考文档&quot;">​</a></h2><blockquote><ul><li><a href="https://juejin.cn/post/6844903872067026951" target="_blank" title="https://juejin.cn/post/6844903872067026951">juejin.cn/post/684490…</a></li><li><a href="https://juejin.cn/post/6844903540213678093" target="_blank" title="https://juejin.cn/post/6844903540213678093">juejin.cn/post/684490…</a></li><li><a href="https://juejin.cn/post/6844903570005835789" target="_blank" title="https://juejin.cn/post/6844903570005835789">juejin.cn/post/684490…</a></li><li><a href="https://juejin.cn/post/6907615220517208078" target="_blank" title="https://juejin.cn/post/6907615220517208078">juejin.cn/post/690761…</a></li><li><a href="https://juejin.cn/post/7025911892056997924" target="_blank" title="https://juejin.cn/post/7025911892056997924">juejin.cn/post/702591…</a></li><li><a href="https://juejin.cn/post/6844904180616822797" target="_blank" title="https://juejin.cn/post/6844904180616822797">juejin.cn/post/684490…</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcaniuse.com%2F%3Fsearch%3DindexedDB" target="_blank" title="https://caniuse.com/?search=indexedDB">caniuse.com/?search=ind…</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3cschool.cn%2Fjavascript_guide%2Fjavascript_guide-rcfy26a4.html" target="_blank" title="https://www.w3cschool.cn/javascript_guide/javascript_guide-rcfy26a4.html">www.w3cschool.cn/javascript_…</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3cschool.cn%2Fjavascript_guide%2Fjavascript_guide-rcfy26a4.html%23toc9" target="_blank" title="https://www.w3cschool.cn/javascript_guide/javascript_guide-rcfy26a4.html#toc9">www.w3cschool.cn/javascript_…</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FIDBObjectStore%2Ftransaction" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore/transaction">developer.mozilla.org/en-US/docs/…</a></li></ul></blockquote></div></div></div></main><footer class="VPDocFooter" data-v-3de533b6 data-v-face870a><!--[--><!--]--><!----><!----></footer><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!----><!--]--></div><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"views_guide.md\":\"7b80fa7f\",\"views_tag.md\":\"4f7e0270\",\"index.md\":\"d9b3d2aa\",\"views_blog_css_bem.md\":\"a0349c4c\",\"views_blog_css_themecolor.md\":\"6a7f10ab\",\"views_friend.md\":\"593be54a\",\"views_blog_algorithm_arrayflat.md\":\"fb71eb9c\",\"views_blog_css_cssshuxingzhizhengzepipeixuanzeqi.md\":\"289192c8\",\"views_blog_algorithm_heap.md\":\"b1563e41\",\"views_blog_css_liangxingcssrangyemiantishengliaojin7beixuanranxingnen.md\":\"58fe8574\",\"views_blog_js_canvasshizhanfangmingrifangzhouguanwanglizitexiao.md\":\"b31f9483\",\"views_blog_css_cssyenenshixianpengzhuangjiance.md\":\"df5b21ba\",\"views_blog_css_bfc.md\":\"46bc20d9\",\"views_blog_algorithm_slidingwindow.md\":\"be3b39b5\",\"views_blog_css_cssshuxingzhidejisuanguocheng.md\":\"b86266f9\",\"views_blog_css_chuncssjianbianhuizhichrometubiao.md\":\"d899e8fd\",\"views_blog_css_githubcssproject.md\":\"9e62dfcb\",\"views_blog_git_updateindex.md\":\"d9eada69\",\"views_blog_js_buyaozailanyongkexuanlianyunsuanfula.md\":\"c80df52a\",\"views_blog_anecdote_lacertafiles.md\":\"a125d387\",\"views_blog_js_chatgptdazijixiaoxihuifushixianyuanli.md\":\"79e98005\",\"views_blog_js_closure.md\":\"9bd3bb55\",\"views_blog_algorithm_lianbiao.md\":\"4e10c57e\",\"views_blog_algorithm_dounblepointer.md\":\"2192af99\",\"views_blog_git_sourcetreekelongshantuiwenti.md\":\"0fab6dd0\",\"views_blog_algorithm_hash.md\":\"54c17e4f\",\"views_blog_js_bindcallapply.md\":\"4e34ebd6\",\"views_blog_algorithm_binarysearch.md\":\"d933a1e9\",\"views_blog_js_biezaishuonibuhuiwebgpuliao.md\":\"2697443a\",\"views_blog_css_fenxiang11zhangjuhaokandepcduanjiemian.md\":\"13391adc\",\"views_blog_electron_kuaisurushouelectronyongyouyigezijidezhuomianyingyong.md\":\"c2e6ad3f\",\"views_blog_js_objectcreate.md\":\"e37c00e2\",\"views_blog_js_hanshukelihua.md\":\"393149cc\",\"views_blog_css_2022niancssduyounaxiegengxin.md\":\"7f709f3b\",\"views_blog_css_cssdomorder.md\":\"fb43ad0c\",\"views_blog_css_kaijuyizhangtugoujianshenqidecssxiaoguo.md\":\"9c7bab99\",\"views_blog_applets_aacalculator.md\":\"d9f06da2\",\"views_blog_js_tantanwaiwangshuapingdeliangzijiuchanxiaoguo.md\":\"6746c0c4\",\"views_blog_js_smoothscrollanchor.md\":\"854090a3\",\"views_blog_js_webqianduanqiyinqiaojixiaochuyibudechuanranxing.md\":\"92e69c1d\",\"views_blog_js_jsdaimaqishikeyizheyangxie.md\":\"8d62b802\",\"views_blog_js_this.md\":\"80055a6c\",\"views_blog_js_prototype.md\":\"a331e2ab\",\"views_blog_vue_shouxievue20yuanmaqimixinhunruyuanli.md\":\"5143662d\",\"views_blog_js_jsdeshuzumoshi.md\":\"f4d9ebb5\",\"views_blog_js_quanzhanzhilunestrumen.md\":\"ddbbeea3\",\"views_blog_css_cssgundongqudongdonghuazhongyuzhengshizhichiliao.md\":\"d70f64ed\",\"views_blog_css_filterbw.md\":\"80550dd5\",\"views_blog_js_shipinchouzhengjituxiangquse.md\":\"7ddbccbf\",\"views_blog_js_jsleixingshiruhexianghuzhuanhuande.md\":\"cb587d18\",\"views_life_plan_2018.md\":\"d0c3c5da\",\"views_life_plan_2019.md\":\"6861514c\",\"views_life_plan_2020.md\":\"ee5a7072\",\"views_life_plan_2021.md\":\"5963d2a9\",\"views_life_plan_2022.md\":\"10e58ccd\",\"views_notes_chrome.md\":\"dd864f84\",\"views_notes_vscode.md\":\"dd9aa73c\",\"views_notes_animation_componentbutton.md\":\"66d2114c\",\"views_notes_web.md\":\"90431cc4\",\"views_notes_animation_componenttabbar.md\":\"0f8b6755\",\"views_notes_animation_coolsquare.md\":\"f66c5dc4\",\"views_notes_animation_mountain.md\":\"9c671e50\",\"views_notes_animation_face.md\":\"cfdd72e0\",\"views_notes_animation_pokemoncards.md\":\"268e00e8\",\"views_notes_animation_pulsatingplanet.md\":\"a33c9356\",\"views_notes_animation_shapescolor.md\":\"c8ef91c7\",\"views_notes_animation_xray.md\":\"abc528ab\",\"views_notes_animation_pikachu.md\":\"e3994aa1\",\"views_notes_animation_particletext.md\":\"b173a4e2\",\"views_notes_css_color.md\":\"107f654d\",\"views_notes_css_cssspecialattributes.md\":\"c4ad70cc\",\"views_notes_css_class.md\":\"acb40089\",\"views_notes_css_shadow.md\":\"3f9c3cbb\",\"views_notes_css_scss.md\":\"54cd02d5\",\"views_notes_js_binarytree.md\":\"503d740b\",\"views_blog_vue_vuedediffsuanfa.md\":\"09746920\",\"views_notes_js_array.md\":\"4a890c16\",\"views_notes_js_object.md\":\"83e6f0f6\",\"views_notes_js_date.md\":\"610245e0\",\"views_notes_js_promise.md\":\"28133934\",\"views_notes_tools_bigfileuploadandresume.md\":\"1e1f9bd5\",\"views_notes_js_string.md\":\"8c18cba5\",\"views_notes_js_sort.md\":\"18570e4d\",\"views_notes_tools_fancyborderradius.md\":\"0d09df77\",\"views_notes_tools_sanjiaoxingxiaogongju.md\":\"66f97aa7\",\"views_notes_tools_cahxquestion.md\":\"272cdfd2\",\"views_notes_vue_axios.md\":\"8ed2dcc4\",\"views_notes_vue_globalcomponents.md\":\"3835fd44\",\"views_blog_js_keshihuadapingautofitjsyixinggaodingzishiying.md\":\"de94978b\",\"views_notes_vue_interval.md\":\"a98ab30a\",\"views_blog_js_inherit.md\":\"c05f417a\",\"views_notes_vue_rem.md\":\"5e81edb1\",\"views_notes_vue_sass.md\":\"f4c796d4\",\"views_notes_vue_title.md\":\"84d3ed76\",\"views_notes_vue_vuelazyload.md\":\"fd865e51\",\"views_notes_vue_router.md\":\"961d0580\",\"views_notes_vue_vueprogressiveimage.md\":\"a6327831\",\"views_travel_calendar.md\":\"c12af259\",\"views_travel_map.md\":\"51409983\",\"views_travel_overview.md\":\"cdf4e241\",\"views_travel_domestic_bj.md\":\"a8a2085e\",\"views_tools_create.md\":\"c8b50e31\",\"views_travel_stroke.md\":\"3de3f01c\",\"views_travel_domestic_ahhs.md\":\"fa492b40\",\"views_travel_domestic_cq.md\":\"338a95b3\",\"views_travel_domestic_fjfz.md\":\"6fb97538\",\"views_travel_domestic_fjqz.md\":\"4da7bf91\",\"views_travel_domestic_fjly.md\":\"20f63ac4\",\"views_travel_domestic_fjxm.md\":\"ef70c3af\",\"views_notes_tools_changyongzhengzebiaodashigongju.md\":\"ba9008d1\",\"views_travel_domestic_hncs.md\":\"62eda84c\",\"views_blog_movie_hexizoulang.md\":\"eec042d3\",\"views_blog_movie_theplanets.md\":\"61acfd6b\",\"views_blog_js_pyodidezailiulanqishangyunxingpythondaima.md\":\"66fdbfe3\",\"views_blog_music_huxijuedingfineletuan.md\":\"690b6675\",\"views_blog_music_jide.md\":\"3c653db5\",\"views_travel_domestic_jscz.md\":\"778b2609\",\"views_blog_music_live.md\":\"f07997f1\",\"views_blog_music_meiyourenbubiwokuaile.md\":\"4dc48bc9\",\"views_blog_music_nigeiwotinghao.md\":\"258809d8\",\"views_travel_domestic_jssz.md\":\"fc164450\",\"views_blog_music_taotai.md\":\"1dcb40b0\",\"views_blog_music_shaonv.md\":\"ca945a6e\",\"views_travel_domestic_jswx.md\":\"7fb3a6f4\",\"views_blog_music_mifeng.md\":\"71faac2b\",\"views_blog_other_aboutmyblog.md\":\"9660362a\",\"views_blog_music_xinsuan.md\":\"df530a01\",\"views_blog_other_bianwanbianxueqianduan.md\":\"171b4d63\",\"views_blog_other_cors.md\":\"8defa98d\",\"views_blog_other_ceshimeizitiliaogebugweishimeniduoliaogeoptionsqingqiu.md\":\"6362db7f\",\"views_blog_other_listen1download.md\":\"af02cc5a\",\"views_blog_other_notice.md\":\"464c71d9\",\"views_blog_other_chatgptdazijixiaoxihuifushixianyuanli.md\":\"27b02cd2\",\"views_blog_other_overthewall.md\":\"737ee68d\",\"views_travel_domestic_jxwgs.md\":\"f03239bb\",\"views_travel_domestic_jxjdz.md\":\"5db85af9\",\"views_blog_other_sanfenzhongchatgptjierudingdingjiqiren.md\":\"03582d42\",\"views_blog_other_staticwebhost.md\":\"2432a2f8\",\"views_blog_other_yonggithubactionvuepresszidonghuabushuzijidewendangwangzhan.md\":\"b7a313e3\",\"views_blog_other_yicixinggaodingicon.md\":\"ce37976a\",\"views_blog_other_regexp.md\":\"71ab16f9\",\"views_travel_domestic_sccd.md\":\"69cc0e78\",\"views_travel_domestic_sxxa.md\":\"6698dc77\",\"views_travel_domestic_tj.md\":\"08fd8e23\",\"views_travel_domestic_sxhs.md\":\"aede88dc\",\"views_travel_domestic_zjdjd.md\":\"969c9950\",\"views_travel_domestic_zjhd.md\":\"cb226f66\",\"views_blog_vue_elementuitablesorticon.md\":\"327578a7\",\"views_blog_vue_shnvueui.md\":\"abbc6ac3\",\"views_travel_domestic_zjhz.md\":\"0f87580a\",\"views_travel_domestic_zjjh.md\":\"4b08b1c3\",\"views_travel_domestic_zjls.md\":\"8e1ff851\",\"views_travel_domestic_zjnb.md\":\"9428e867\",\"views_blog_vue_kanliaoantfudalaodevlazyshowwoxuehuiliaozenmebianyimobanzhiling.md\":\"c6e9c5ac\",\"views_travel_domestic_zjnh.md\":\"c534e449\",\"views_travel_domestic_zjqdh.md\":\"dc9cc719\",\"views_travel_domestic_zjqz.md\":\"a806bba3\",\"views_travel_domestic_zjsx.md\":\"6d321159\",\"views_blog_js_pdfdownload.md\":\"5fd2f47b\",\"views_blog_vue_ellibrarycode.md\":\"ee8d6f62\",\"views_blog_vue_elementplusyuanmaxuexihouwoliaojiedaoduozhongduoyangdexiefa.md\":\"168118b0\",\"views_travel_domestic_zjtz.md\":\"ad537cac\",\"views_life_game_都市天际线.md\":\"236be4b0\",\"views_blog_vue_jsx.md\":\"6a51a318\",\"views_blog_other_niukezuixinqianduanjsbishibaiti.md\":\"ac1256ca\",\"views_blog_vue_vueiconfontonline.md\":\"48b76ff9\",\"views_blog_js_jsqianduanxingnenyouhua.md\":\"a5748925\",\"views_interview_css.md\":\"89d9bef1\",\"views_interview_algorithm.md\":\"41e29730\",\"views_interview_browser.md\":\"67f80233\",\"views_interview_electron.md\":\"2b263941\",\"views_interview_http.md\":\"95ffff77\",\"views_interview_html.md\":\"4e824584\",\"views_blog_vue_vue2tovue3.md\":\"7f3d9715\",\"views_interview_javascript.md\":\"7be47447\",\"views_interview_react.md\":\"c139b2b5\",\"views_interview_node.md\":\"44b5d8d5\",\"views_interview_uniapp.md\":\"e6e0bc7f\",\"views_interview_vite.md\":\"c7b82e12\",\"views_life_anime.md\":\"792a5f62\",\"views_life_gundam.md\":\"f7038c09\",\"views_life_diary_2019-03.md\":\"70389332\",\"views_life_plan.md\":\"f02008f0\",\"views_life_diary_2019-05.md\":\"0ae2cf6b\",\"views_life_diary_2019-09.md\":\"de964c3a\",\"views_life_diary_2019-10.md\":\"11cf11df\",\"views_life_diary_2019-11.md\":\"d231c8bb\",\"views_life_diary_2020-03.md\":\"ed75de84\",\"views_life_diary_2020-04.md\":\"a2cf0406\",\"views_life_diary_2020-05.md\":\"90d0fc67\",\"views_life_diary_2020-07.md\":\"009b63b5\",\"views_life_diary_2020-09.md\":\"268a93d8\",\"views_life_diary_2022-11.md\":\"4eaa0ff1\",\"views_life_game_gta5.md\":\"264c70ff\",\"views_life_game_nba2kol2.md\":\"23cd6f1b\",\"views_life_game_sd敢达.md\":\"d02a1922\",\"views_life_game_spiderman.md\":\"1e10969f\",\"views_life_game_spidermanmiles.md\":\"ef819745\",\"views_life_game_奥日与精灵意志.md\":\"57130f2f\",\"views_life_game_奥日与黑暗森林.md\":\"e910f557\",\"views_life_game_极限竞速4：地平线.md\":\"9ad08bdf\",\"views_life_game_神秘海域4.md\":\"fdb13863\",\"views_life_game_英雄联盟.md\":\"bfa568fa\",\"views_life_game_荒野大镖客2.md\":\"8949e1d7\",\"views_travel_domestic_jsnj.md\":\"030426a2\",\"views_travel_domestic_jxgz.md\":\"c7f819e7\",\"views_travel_domestic_jxlhs.md\":\"fec8e97d\",\"views_blog_other_qianduandejueduilujinghexiangduilujing.md\":\"f9dbb406\",\"views_travel_domestic_jxwy.md\":\"682e6a78\",\"views_travel_domestic_jxys.md\":\"0076dc0d\",\"views_life_game_动物园之星.md\":\"cbe4efb5\",\"views_blog_other_zhonggaojiqianduanbixuzhangwodepackagejsonzuixinzuiquanzhinan.md\":\"d68bb0c6\",\"views_blog_other_kaifaguochengzhongshiyongkeyizaodianxiabandecodingxiaojiqiao.md\":\"f8277fd9\",\"views_blog_js_weixinduzaiyongdekaiyuandongxiaofanganpagdongxiao.md\":\"bb34d1a4\",\"views_blog_js_pdfjs.md\":\"039a99c7\",\"views_blog_js_shixianyigedawenjianshangchuanheduandianxuchuan.md\":\"72d99be1\",\"views_blog_js_objectkeysfanhuishiyouxudehuaishiwuxude.md\":\"3a35c9e8\",\"views_notes_vue_nprogress.md\":\"87959591\",\"views_travel_domestic_zjtl.md\":\"9cf3a0fc\",\"views_blog_js_qianduanbianchengzhidao73gaojiqianduanbixuyaodongdesolidyuanze.md\":\"f289a133\",\"views_notes_tools_xiaoyu12pxdewenzishengchengqi.md\":\"bcd09685\",\"views_travel_domestic_hnsy.md\":\"ec91926e\",\"views_blog_algorithm_stack.md\":\"8557ad1c\",\"views_life_game_过山车之星.md\":\"a2bd2c80\",\"views_blog_js_web3dxiangmuxingnenyouhuazongjie.md\":\"65e4e5c4\",\"views_blog_js_yixingdaimarangnidekongzhitaizhongduansaoqilai.md\":\"defbc281\",\"views_blog_js_node-sassversion.md\":\"6f22cf2b\",\"views_blog_js_wozhongyugaodongliaoasyncawaitpromisehesettimeoutdezhixingshunxu.md\":\"b0ed2249\",\"views_blog_vue_vuecli3config.md\":\"353c65f8\",\"views_blog_js_wutouliulanqipuppeteerchutan.md\":\"3ca5af20\",\"views_blog_js_qingsongshouxiefangdouhejieliu.md\":\"40978bbc\",\"views_blog_vue_vuedirective.md\":\"24c2c53d\",\"views_blog_js_jslingmenzhishibiaoqian.md\":\"4e2b687d\",\"views_blog_vue_vuedocumentwindowerror.md\":\"b39f670b\",\"views_blog_vue_vueclisassloader.md\":\"1a88a4dc\",\"views_blog_vue_vuedesign.md\":\"4a287187\",\"views_blog_vue_vueexportpdf.md\":\"2cea36a6\",\"views_travel_domestic_hnwc.md\":\"1c35c6b8\",\"views_blog_js_shixianpromiseall.md\":\"c8bcb2db\",\"views_blog_js_weiiframezhengmingnikenenbingbuxuyaoweiqianduan.md\":\"e062ba71\",\"views_blog_vue_vueallclickthrottle.md\":\"9892a717\",\"views_travel_domestic_zjxds.md\":\"44d48910\",\"views_travel_domestic_zjyds.md\":\"970611ab\",\"views_travel_domestic_zjyw.md\":\"b02e7a5f\",\"views_travel_domestic_zjzs.md\":\"e0378b7a\",\"views_travel_foreign_tgmg.md\":\"9ab75647\",\"views_travel_foreign_ynhn.md\":\"226a093b\",\"views_blog_js_screenshot.md\":\"26ae9470\",\"views_travel_foreign_ynhzm.md\":\"95e54938\",\"views_travel_foreign_ynxg.md\":\"5c7d357e\",\"views_blog_other_macostrustdsecuritydcpuguogaowenti.md\":\"19a70fc6\",\"views_blog_other_xiehtmlyemianmeiyisilaitaozhanchromechajiankaifa.md\":\"848397f7\",\"views_travel_domestic_zjxs.md\":\"6f4b2b9f\",\"views_blog_music_chunqiu.md\":\"b2a713c0\",\"views_interview_vue.md\":\"4ac1d58e\",\"views_travel_domestic_sh.md\":\"e7f69baf\",\"views_blog_other_youtubedl.md\":\"fcbcb738\",\"views_life_game_跑跑卡丁车.md\":\"6b59ce37\",\"views_blog_js_wangjilocalstoragebaindexeddbcaishiqianduancunchuxinchong.md\":\"791377f2\",\"views_blog_vue_vuehooksrangvuekaifagengjiandanyugaoxiao.md\":\"c10d6e29\",\"views_blog_vue_vuexmodules.md\":\"3bcb97b1\",\"views_interview_webpack.md\":\"f950b1bd\",\"views_blog_vue_vuepressintractabledisease.md\":\"dc230a4a\",\"views_travel_foreign_tgbty.md\":\"dfd8b553\",\"views_blog_vue_vuetouchbox.md\":\"c13a19ff\",\"views_blog_vue_vueyuanmajiexizhishujuxiangyingshiyuanli.md\":\"2c30aefe\",\"views_life_game_王者荣耀.md\":\"72309f23\",\"views_blog_vue_vuepressinheritancetheme.md\":\"43ec1140\",\"views_blog_js_new.md\":\"2a8e63a3\",\"views_blog_other_zhegejiaohushigerenbokenenrangniyanqianyiliang.md\":\"259891bf\",\"views_interview_question.md\":\"ea2e3e2d\",\"views_blog_vue_echartszaivue3shangdetooltipxianshiwenti.md\":\"78914908\",\"views_interview_microfrontends.md\":\"6e79ef36\",\"views_interview_typescript.md\":\"4e36bb65\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"野宁新之助\",\"description\":\"Think twice before you do.\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"归档\",\"link\":\"/views/Guide\"},{\"text\":\"标签\",\"link\":\"/views/Tag\"},{\"text\":\"笔记\",\"link\":\"/views/notes/Web\"},{\"text\":\"生活\",\"link\":\"/views/life/Anime\"},{\"text\":\"旅程\",\"link\":\"/views/travel/Overview\"},{\"text\":\"友链\",\"link\":\"/views/Friend\"}],\"sidebar\":{\"/views/notes/\":[{\"text\":\"书签\",\"link\":\"/views/notes/Web\"},{\"text\":\"Chrome\",\"link\":\"/views/notes/Chrome\"},{\"text\":\"VsCode\",\"link\":\"/views/notes/VsCode\"},{\"text\":\"小工具\",\"collapsable\":false,\"items\":[{\"text\":\"边框圆角生成器\",\"link\":\"/views/notes/tools/Fancyborderradius.md\"},{\"text\":\"三角形生成器\",\"link\":\"/views/notes/tools/SanJiaoXingXiaoGongJu.md\"}]},{\"text\":\"JavaScript\",\"collapsable\":false,\"items\":[{\"text\":\"Object 对象\",\"link\":\"/views/notes/js/Object\"},{\"text\":\"Array 数组\",\"link\":\"/views/notes/js/Array\"},{\"text\":\"Date 日期处理\",\"link\":\"/views/notes/js/Date\"},{\"text\":\"String 字符串\",\"link\":\"/views/notes/js/String\"},{\"text\":\"BinaryTree 二叉树\",\"link\":\"/views/notes/js/BinaryTree\"},{\"text\":\"Promise 同步\",\"link\":\"/views/notes/js/Promise\"},{\"text\":\"Sort 排序\",\"link\":\"/views/notes/js/Sort\"}]},{\"text\":\"CSS\",\"collapsable\":false,\"items\":[{\"text\":\"CSS 特殊属性值\",\"link\":\"/views/notes/css/CssSpecialAttributes\"},{\"text\":\"Class 常用Class\",\"link\":\"/views/notes/css/Class\"},{\"text\":\"Color 常用色彩\",\"link\":\"/views/notes/css/Color\"},{\"text\":\"Shadow 投影\",\"link\":\"/views/notes/css/Shadow\"},{\"text\":\"Scss css预编译器\",\"link\":\"/views/notes/css/Scss\"}]},{\"text\":\"Vue2\",\"collapsable\":false,\"items\":[{\"text\":\"Axios 常用配置\",\"link\":\"/views/notes/vue/Axios\"},{\"text\":\"Nprogress 页面顶部加载条\",\"link\":\"/views/notes/vue/Nprogress\"},{\"text\":\"Interval 定时器\",\"link\":\"/views/notes/vue/Interval\"},{\"text\":\"Rem 适配\",\"link\":\"/views/notes/vue/Rem\"},{\"text\":\"Router 路由\",\"link\":\"/views/notes/vue/Router\"},{\"text\":\"Sass 在vue中使用\",\"link\":\"/views/notes/vue/Sass\"},{\"text\":\"Title 动态title\",\"link\":\"/views/notes/vue/Title\"},{\"text\":\"Vue 全局组件\",\"link\":\"/views/notes/vue/GlobalComponents\"},{\"text\":\"VueLazyload 使用方法\",\"link\":\"/views/notes/vue/VueLazyload\"},{\"text\":\"vueProgressiveImage 使用方法\",\"link\":\"/views/notes/vue/vueProgressiveImage\"}]}],\"/views/travel/\":[{\"text\":\"总览\",\"link\":\"/views/travel/Overview\"},{\"text\":\"地图\",\"link\":\"/views/travel/Map\"},{\"text\":\"日历\",\"link\":\"/views/travel/Calendar\"}],\"/views/life/\":[{\"text\":\"动漫\",\"link\":\"/views/life/Anime\"},{\"text\":\"高达\",\"link\":\"/views/life/Gundam\"}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/ShnHz\"},{\"icon\":{\"svg\":\"<svg id=\\\"social-qq\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\" viewBox=\\\"0 0 24 24\\\" style=\\\"enable-background:new 0 0 24 24;\\\" xml:space=\\\"preserve\\\"><ellipse cx=\\\"12\\\" cy=\\\"12\\\" rx=\\\"12\\\" ry=\\\"11.7\\\" /> <path fill=\\\"#FFFFFF\\\" d=\\\"M19.5,16.8c-0.4-1.2-0.8-2.3-1.5-3.9c0.1-4.4-1.7-8-6-8c-4.3,0-6.1,3.6-6,8c-0.7,1.7-1.1,2.7-1.5,3.9c-0.8,2.6-0.5,3.7-0.3,3.7c0.4,0.1,1.7-2,1.7-2c0,1.2,0.6,2.7,1.9,3.8c-0.6,0.2-2,0.7-1.7,1.3c0.3,0.5,4.7,0.3,5.9,0.2c1.3,0.1,5.7,0.3,5.9-0.2c0.3-0.6-1.1-1.1-1.7-1.3c1.3-1.1,1.9-2.6,1.9-3.8c0,0,1.2,2,1.7,2C20,20.5,20.3,19.4,19.5,16.8z\\\" /></svg>\"},\"link\":\"tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=664652740&website=www.oicqzone.com\"},{\"icon\":{\"svg\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M12.72 2.03A9.991 9.991 0 0 0 2.03 12.72C2.39 18.01 7.01 22 12.31 22H16c.55 0 1-.45 1-1s-.45-1-1-1h-3.67c-3.73 0-7.15-2.42-8.08-6.03c-1.49-5.8 3.91-11.21 9.71-9.71C17.58 5.18 20 8.6 20 12.33v1.1c0 .79-.71 1.57-1.5 1.57s-1.5-.78-1.5-1.57v-1.25c0-2.51-1.78-4.77-4.26-5.12a5.008 5.008 0 0 0-5.66 5.87a4.996 4.996 0 0 0 3.72 3.94c1.84.43 3.59-.16 4.74-1.33c.89 1.22 2.67 1.86 4.3 1.21c1.34-.53 2.16-1.9 2.16-3.34v-1.09c0-5.31-3.99-9.93-9.28-10.29zM12 15c-1.66 0-3-1.34-3-3s1.34-3 3-3s3 1.34 3 3s-1.34 3-3 3z\\\" fill=\\\"currentColor\\\"></path></svg>\"},\"link\":\"mailto:hzshn664652740@gmail.com\"}],\"search\":{\"provider\":\"local\"},\"lastUpdated\":true,\"docFooter\":{\"prev\":\"Previous page\",\"next\":\"Next page\"},\"returnToTopLabel\":\"Return to top\",\"outline\":[3,5],\"record\":\"浙ICP备18029315号-2\",\"recordLink\":\"http://beian.miit.gov.cn/\",\"author\":\"野宁新之助\",\"startYear\":\"2019\",\"globalAccess\":true,\"valine\":{\"enable\":true,\"appId\":\"2MgoJb7PsBdDJavPcPPU3oO2-gzGzoHsz\",\"appKey\":\"mF1z8VJ3jMiohj3Q2S4b7yB6\"},\"password\":\"81dc9bdb52d04dc20036dbd8313ed055\"},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>